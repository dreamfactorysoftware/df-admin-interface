"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[4796],{41089:(R,T,a)=>{a.d(T,{v:()=>A});var c=a(65879),m=a(96814),e=a(32296),_=a(45597),p=a(90590);function M(u,d){if(1&u){const h=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){c.CHM(h);const U=c.oxw(2);return c.KtG(U.dismissAlert())}),c.TgZ(1,"fa-icon",6),c._uU(2),c.qZA()()}if(2&u){const h=c.oxw(2);c.xp6(1),c.Q6J("icon",h.faXmark),c.xp6(1),c.Oqu("alerts.close")}}function f(u,d){if(1&u&&(c.TgZ(0,"div",1),c._UZ(1,"fa-icon",2),c.TgZ(2,"span",3),c.Hsn(3),c.qZA(),c.YNc(4,M,3,2,"button",4),c.qZA()),2&u){const h=c.oxw();c.Tol(h.alertType),c.xp6(1),c.Q6J("icon",h.icon),c.xp6(3),c.Q6J("ngIf",h.dismissible)}}const t=["*"];let A=(()=>{class u{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new c.vpe,this.faXmark=p.g82}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return p.f8k;case"error":return p.$9F;case"warning":return p.RLE;default:return p.sqG}}}return u.\u0275fac=function(h){return new(h||u)},u.\u0275cmp=c.Xpm({type:u,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[c.jDz],ngContentSelectors:t,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(h,o){1&h&&(c.F$t(),c.YNc(0,f,5,4,"div",0)),2&h&&c.Q6J("ngIf",o.showAlert)},dependencies:[m.O5,e.ot,e.RK,_.uH,_.BN],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]}),u})()},84870:(R,T,a)=>{a.d(T,{a:()=>B});var E,c=a(97582),m=a(96814),e=a(65879),_=a(56223),p=a(64170),M=a(32296),f=a(25313),t=a(2032),A=a(82599),u=a(45597),d=a(3305),h=a(90590),o=a(42346),U=a(78791),L=a(65763);function P(r,n){if(1&r&&(e.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4),e.ALo(5,"transloco"),e.qZA(),e.TgZ(6,"mat-panel-description"),e._uU(7),e.ALo(8,"transloco"),e.qZA()(),e.GkF(9,3),e.qZA()()),2&r){e.oxw();const s=e.MAs(4);e.xp6(4),e.hij(" ",e.lcZ(5,3,"lookupKeys.label"),""),e.xp6(3),e.Oqu(e.lcZ(8,5,"lookupKeys.desc")),e.xp6(2),e.Q6J("ngTemplateOutlet",s)}}function y(r,n){1&r&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"name")," "))}function Z(r,n){1&r&&(e.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e._UZ(5,"input",18),e.qZA()()),2&r&&(e.Q6J("formGroupName",n.index),e.xp6(3),e.Oqu(e.lcZ(4,2,"name")))}function l(r,n){1&r&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"value")," "))}function i(r,n){1&r&&(e.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e._UZ(5,"input",19),e.qZA()()),2&r&&(e.Q6J("formGroupName",n.index),e.xp6(3),e.Oqu(e.lcZ(4,2,"value")))}function g(r,n){1&r&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"private")," "))}function x(r,n){1&r&&(e.TgZ(0,"mat-cell",16),e._UZ(1,"mat-slide-toggle",20),e.ALo(2,"transloco"),e.qZA()),2&r&&(e.Q6J("formGroupName",n.index),e.xp6(1),e.uIk("aria-label",e.lcZ(2,2,"name")))}function D(r,n){if(1&r){const s=e.EpF();e.TgZ(0,"mat-header-cell")(1,"button",21),e.NdJ("click",function(){e.CHM(s);const I=e.oxw(2);return e.KtG(I.add())}),e.ALo(2,"transloco"),e._UZ(3,"fa-icon",22),e.qZA()()}if(2&r){const s=e.oxw(2);e.xp6(1),e.uIk("aria-label",e.lcZ(2,2,"newEntry")),e.xp6(2),e.Q6J("icon",s.faPlus)}}function C(r,n){if(1&r){const s=e.EpF();e.TgZ(0,"mat-cell",16)(1,"button",23),e.NdJ("click",function(){const k=e.CHM(s).index,w=e.oxw(2);return e.KtG(w.remove(k))}),e._UZ(2,"fa-icon",24),e.qZA()()}if(2&r){const s=n.index,v=e.oxw(2);e.Q6J("formGroupName",s),e.xp6(2),e.Q6J("icon",v.faTrashCan)}}function O(r,n){1&r&&e._UZ(0,"mat-header-row")}function N(r,n){1&r&&e._UZ(0,"mat-row")}function K(r,n){1&r&&(e.TgZ(0,"tr",25)(1,"td",26),e._uU(2),e.ALo(3,"transloco"),e.qZA()()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lookupKeys.noKeys")," "))}function b(r,n){if(1&r&&(e.ynx(0,4)(1,5),e.TgZ(2,"mat-table",6),e.ynx(3,7),e.YNc(4,y,3,3,"mat-header-cell",8),e.YNc(5,Z,6,4,"mat-cell",9),e.BQk(),e.ynx(6,10),e.YNc(7,l,3,3,"mat-header-cell",8),e.YNc(8,i,6,4,"mat-cell",9),e.BQk(),e.ynx(9,11),e.YNc(10,g,3,3,"mat-header-cell",8),e.YNc(11,x,3,4,"mat-cell",9),e.BQk(),e.ynx(12,12),e.YNc(13,D,4,4,"mat-header-cell",8),e.YNc(14,C,3,2,"mat-cell",9),e.BQk(),e.YNc(15,O,1,0,"mat-header-row",13),e.YNc(16,N,1,0,"mat-row",14),e.YNc(17,K,4,3,"tr",15),e.qZA(),e.BQk()()),2&r){const s=e.oxw();e.Q6J("formGroup",s.rootForm),e.xp6(2),e.Q6J("dataSource",s.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",s.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",s.displayedColumns)}}let B=((E=class{constructor(n,s){this.rootFormGroup=n,this.themeService=s,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=h.Vui,this.faPlus=h.r8p,this.showAccordion=!0,this.lookupDeleted=new e.vpe,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(n=>{n.get("id")?.value&&n.get("name")?.disable()}),this.dataSource=new f.by(this.lookupKeys.controls)}add(){this.lookupKeys.push(new _.cw({name:new _.NI("",_.kI.required),value:new _.NI(""),private:new _.NI(!1)})),this.updateDataSource()}remove(n){const s=this.lookupKeys.at(n).value;s.id&&this.lookupDeleted.emit(s),this.lookupKeys.removeAt(n),this.updateDataSource()}}).\u0275fac=function(n){return new(n||E)(e.Y36(_.sg),e.Y36(L.F))},E.\u0275cmp=e.Xpm({type:E,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},outputs:{lookupDeleted:"lookupDeleted"},standalone:!0,features:[e.jDz],decls:5,vars:6,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["color","primary","formControlName","private"],["mat-mini-fab","","type","button",1,"save-btn",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",1,"remove-btn",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(n,s){if(1&n&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.YNc(2,P,10,7,"mat-accordion",1),e.YNc(3,b,18,4,"ng-template",null,2,e.W1O),e.qZA()),2&n){const v=e.MAs(4);e.Tol(e.lcZ(1,4,s.isDarkMode)?"dark-theme":""),e.xp6(2),e.Q6J("ngIf",s.showAccordion)("ngIfElse",v)}},dependencies:[_.u5,_.Fj,_.JJ,_.JL,_.UX,_.sg,_.u,_.x0,_.CE,m.O5,m.tP,p.lN,p.KE,p.hX,M.ot,M.RK,M.nh,f.p0,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,f.Ee,t.c,t.Nt,A.rP,A.Rr,u.uH,u.BN,d.To,d.pp,d.ib,d.yz,d.yK,d.u4,o.Ot,m.Ov],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]}),E);B=(0,c.gn)([(0,U.c)({checkProperties:!0})],B)},2593:(R,T,a)=>{a.d(T,{e:()=>Z});var u,c=a(97582),m=a(96814),e=a(56223),_=a(64170),p=a(2032),M=a(42346),f=a(78791),t=a(65879),A=a(65763);function d(l,i){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.username.errors.required")," "))}function h(l,i){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.username.errors.minLength")," "))}function o(l,i){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.email.errors.invalid")," "))}function U(l,i){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.email.errors.required")," "))}function L(l,i){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.firstName.errors.required")," "))}function E(l,i){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.lastName.errors.required")," "))}function P(l,i){1&l&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.displayName.errors.required")," "))}function y(l,i){1&l&&(t.TgZ(0,"mat-form-field",2)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"input",10),t.qZA()),2&l&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"userManagement.controls.phone.label")))}let Z=((u=class{constructor(i,g){this.rootFormGroup=i,this.themeService=g,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()})}controlExists(i){return null!==this.rootForm.get(i)}isRequired(i){return!!this.rootForm.get(i)?.hasValidator(e.kI.required)}}).\u0275fac=function(i){return new(i||u)(t.Y36(e.sg),t.Y36(A.F))},u.\u0275cmp=t.Xpm({type:u,selectors:[["df-profile-details"]],standalone:!0,features:[t.jDz],decls:37,vars:31,consts:[["name","user-details-section",3,"formGroup"],["formGroupName","profileDetailsGroup"],["appearance","outline"],["matInput","","type","text","formControlName","username"],[4,"ngIf"],["matInput","","type","email","formControlName","email"],["matInput","","type","text","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","name"],["appearance","outline",4,"ngIf"],["matInput","","formControlName","phone"]],template:function(i,g){if(1&i&&(t.ynx(0,0),t.ALo(1,"async"),t.ynx(2,1),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5),t.ALo(6,"transloco"),t.ALo(7,"transloco"),t.qZA(),t._UZ(8,"input",3),t.YNc(9,d,3,3,"mat-error",4),t.YNc(10,h,3,3,"mat-error",4),t.qZA(),t.TgZ(11,"mat-form-field",2)(12,"mat-label"),t._uU(13),t.ALo(14,"transloco"),t.qZA(),t._UZ(15,"input",5),t.YNc(16,o,3,3,"mat-error",4),t.YNc(17,U,3,3,"mat-error",4),t.qZA(),t.TgZ(18,"mat-form-field",2)(19,"mat-label"),t._uU(20),t.ALo(21,"transloco"),t.qZA(),t._UZ(22,"input",6),t.YNc(23,L,3,3,"mat-error",4),t.qZA(),t.TgZ(24,"mat-form-field",2)(25,"mat-label"),t._uU(26),t.ALo(27,"transloco"),t.qZA(),t._UZ(28,"input",7),t.YNc(29,E,3,3,"mat-error",4),t.qZA(),t.TgZ(30,"mat-form-field",2)(31,"mat-label"),t._uU(32),t.ALo(33,"transloco"),t.qZA(),t._UZ(34,"input",8),t.YNc(35,P,3,3,"mat-error",4),t.qZA(),t.YNc(36,y,5,3,"mat-form-field",9),t.BQk()()),2&i){let x,D,C,O,N,K,b;t.Tol(t.lcZ(1,17,g.isDarkMode)?"dark-theme":""),t.Q6J("formGroup",g.rootForm),t.xp6(5),t.AsE("",t.lcZ(6,19,"userManagement.controls.username.altLabel"),"",g.isRequired("profileDetailsGroup.username")?"":" "+t.lcZ(7,21,"userManagement.controls.username.optional"),""),t.xp6(4),t.Q6J("ngIf",null==(x=g.rootForm.get("profileDetailsGroup.username"))||null==x.errors?null:x.errors.required),t.xp6(1),t.Q6J("ngIf",null==(D=g.rootForm.get("profileDetailsGroup.username"))||null==D.errors?null:D.errors.minlength),t.xp6(3),t.hij(" ",t.lcZ(14,23,"userManagement.controls.email.label"),""),t.xp6(3),t.Q6J("ngIf",(null==(C=g.rootForm.get("profileDetailsGroup.email"))||null==C.errors?null:C.errors.email)&&!(null!=(C=g.rootForm.get("profileDetailsGroup.email"))&&null!=C.errors&&C.errors.required)),t.xp6(1),t.Q6J("ngIf",!(null!=(O=g.rootForm.get("profileDetailsGroup.email"))&&null!=O.errors&&O.errors.email)&&(null==(O=g.rootForm.get("profileDetailsGroup.email"))||null==O.errors?null:O.errors.required)),t.xp6(3),t.hij(" ",t.lcZ(21,25,"userManagement.controls.firstName.label"),""),t.xp6(3),t.Q6J("ngIf",null==(N=g.rootForm.get("profileDetailsGroup.firstName"))||null==N.errors?null:N.errors.required),t.xp6(3),t.Oqu(t.lcZ(27,27,"userManagement.controls.lastName.label")),t.xp6(3),t.Q6J("ngIf",null==(K=g.rootForm.get("profileDetailsGroup.lastName"))||null==K.errors?null:K.errors.required),t.xp6(3),t.Oqu(t.lcZ(33,29,"userManagement.controls.displayName.label")),t.xp6(3),t.Q6J("ngIf",null==(b=g.rootForm.get("profileDetailsGroup.name"))||null==b.errors?null:b.errors.required),t.xp6(1),t.Q6J("ngIf",g.controlExists("profileDetailsGroup.phone"))}},dependencies:[_.lN,_.KE,_.hX,_.TO,p.c,p.Nt,e.u5,e.Fj,e.JJ,e.JL,e.UX,e.sg,e.u,e.x0,M.Ot,m.O5,m.Ov],encapsulation:2}),u);Z=(0,c.gn)([(0,f.c)({checkProperties:!0})],Z)},31033:(R,T,a)=>{a.d(T,{U:()=>B});var E,c=a(97582),m=a(56223),e=a(32296),_=a(25313),p=a(2032),M=a(45597),f=a(3305),t=a(24630),A=a(90590),u=a(42346),d=a(96814),h=a(78791),o=a(65879),U=a(23680),L=a(64170);function P(r,n){1&r&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&r&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"roles.app")," "))}function y(r,n){if(1&r&&(o.TgZ(0,"mat-option",18),o._uU(1),o.qZA()),2&r){const s=n.$implicit;o.Q6J("value",s.name),o.xp6(1),o.hij(" ",s.name," ")}}function Z(r,n){if(1&r&&(o.TgZ(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),o._uU(3),o.ALo(4,"transloco"),o.qZA(),o._UZ(5,"input",14),o.TgZ(6,"mat-autocomplete",15,16),o.YNc(8,y,2,2,"mat-option",17),o.qZA()()()),2&r){const s=n.index,v=o.MAs(7),I=o.oxw();o.Q6J("formGroupName",s),o.xp6(3),o.Oqu(o.lcZ(4,4,"roles.app")),o.xp6(2),o.Q6J("matAutocomplete",v),o.xp6(3),o.Q6J("ngForOf",I.availableApps)}}function l(r,n){1&r&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&r&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"roles.role")," "))}function i(r,n){if(1&r&&(o.TgZ(0,"mat-option",18),o._uU(1),o.qZA()),2&r){const s=n.$implicit;o.Q6J("value",s.name),o.xp6(1),o.hij(" ",s.name," ")}}function g(r,n){if(1&r&&(o.TgZ(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),o._uU(3),o.ALo(4,"transloco"),o.qZA(),o._UZ(5,"input",19),o.TgZ(6,"mat-autocomplete",15,16),o.YNc(8,i,2,2,"mat-option",17),o.qZA()()()),2&r){const s=n.index,v=o.MAs(7),I=o.oxw();o.Q6J("formGroupName",s),o.xp6(3),o.Oqu(o.lcZ(4,4,"roles.role")),o.xp6(2),o.Q6J("matAutocomplete",v),o.xp6(3),o.Q6J("ngForOf",I.roles)}}function x(r,n){if(1&r){const s=o.EpF();o.TgZ(0,"button",21),o.NdJ("click",function(){o.CHM(s);const I=o.oxw(2);return o.KtG(I.add())}),o.ALo(1,"transloco"),o._UZ(2,"fa-icon",22),o.qZA()}if(2&r){const s=o.oxw(2);o.uIk("aria-label",o.lcZ(1,2,"newEntry")),o.xp6(2),o.Q6J("icon",s.faPlus)}}function D(r,n){if(1&r&&(o.TgZ(0,"mat-header-cell"),o.YNc(1,x,3,4,"button",20),o.qZA()),2&r){const s=o.oxw();o.xp6(1),o.Q6J("ngIf",s.showAddButton)}}function C(r,n){if(1&r){const s=o.EpF();o.TgZ(0,"mat-cell",12)(1,"button",23),o.NdJ("click",function(){const k=o.CHM(s).index,w=o.oxw();return o.KtG(w.remove(k))}),o._UZ(2,"fa-icon",24),o.qZA()()}if(2&r){const s=n.index,v=o.oxw();o.Q6J("formGroupName",s),o.xp6(2),o.Q6J("icon",v.faTrashCan)}}function O(r,n){1&r&&o._UZ(0,"mat-header-row")}function N(r,n){1&r&&o._UZ(0,"mat-row")}function K(r,n){1&r&&(o.TgZ(0,"tr",25)(1,"td",26),o._uU(2),o.ALo(3,"transloco"),o.qZA()()),2&r&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"roles.noRoles")," "))}const b=function(r,n){return{assigned:r,total:n}};let B=((E=class{constructor(n){this.rootFormGroup=n,this.apps=[],this.roles=[],this.displayedColumns=["app","role","actions"],this.faTrashCan=A.Vui,this.faPlus=A.r8p}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()}),this.appRoles=this.rootForm.get("appRoles"),this.updateDataSource()}updateDataSource(){this.dataSource=new _.by(this.appRoles.controls)}get availableApps(){return this.apps.filter(n=>!this.appRoles.value.find(s=>s.app===n.name))}get showAddButton(){return this.appRoles.length<this.apps.length}get assignedApps(){return this.apps.length-this.appRoles.length}add(){this.appRoles.push(new m.cw({app:new m.NI("",m.kI.required),role:new m.NI("",m.kI.required)})),this.updateDataSource()}remove(n){this.appRoles.removeAt(n),this.updateDataSource()}}).\u0275fac=function(n){return new(n||E)(o.Y36(m.sg))},E.\u0275cmp=o.Xpm({type:E,selectors:[["df-user-app-roles"]],inputs:{apps:"apps",roles:"roles"},standalone:!0,features:[o.jDz],decls:25,vars:14,consts:[[1,"app-roles-keys-accordion"],[3,"formGroup"],["formArrayName","appRoles"],[3,"dataSource"],["matColumnDef","app"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"formGroupName"],["subscriptSizing","dynamic"],["matInput","","formControlName","app",3,"matAutocomplete"],["requireSelection",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","role",3,"matAutocomplete"],["mat-mini-fab","","color","primary","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary","type","button",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",3,"click"],["size","xs",3,"icon"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(n,s){1&n&&(o.TgZ(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),o._uU(5),o.ALo(6,"transloco"),o.qZA(),o.TgZ(7,"mat-panel-description"),o._uU(8),o.ALo(9,"transloco"),o.qZA()(),o.ynx(10,1)(11,2),o.TgZ(12,"mat-table",3),o.ynx(13,4),o.YNc(14,P,3,3,"mat-header-cell",5),o.YNc(15,Z,9,6,"mat-cell",6),o.BQk(),o.ynx(16,7),o.YNc(17,l,3,3,"mat-header-cell",5),o.YNc(18,g,9,6,"mat-cell",6),o.BQk(),o.ynx(19,8),o.YNc(20,D,2,1,"mat-header-cell",5),o.YNc(21,C,3,2,"mat-cell",6),o.BQk(),o.YNc(22,O,1,0,"mat-header-row",9),o.YNc(23,N,1,0,"mat-row",10),o.YNc(24,K,4,3,"tr",11),o.qZA(),o.BQk()(),o.qZA()()()),2&n&&(o.xp6(5),o.hij(" ",o.lcZ(6,6,"roles.label"),""),o.xp6(3),o.Oqu(o.xi3(9,8,"roles.appRoleAssigned",o.WLB(11,b,s.apps.length-s.availableApps.length,s.apps.length))),o.xp6(2),o.Q6J("formGroup",s.rootForm),o.xp6(2),o.Q6J("dataSource",s.dataSource),o.xp6(10),o.Q6J("matHeaderRowDef",s.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",s.displayedColumns))},dependencies:[m.u5,m.Fj,m.JJ,m.JL,m.UX,m.sg,m.u,m.x0,m.CE,t.Bb,t.XC,U.ey,t.ZL,e.ot,e.RK,e.nh,_.p0,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,_.Ee,p.c,p.Nt,L.KE,L.hX,M.uH,M.BN,f.To,f.pp,f.ib,f.yz,f.yK,f.u4,u.Ot,d.O5,d.ax],styles:[".app-roles-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%]{max-width:10%}"]}),E);B=(0,c.gn)([(0,h.c)({checkProperties:!0})],B)},73998:(R,T,a)=>{a.d(T,{x:()=>y});var P,c=a(97582),m=a(65879),e=a(56223),_=a(92418),p=a(62651),M=a(42281),f=a(90590),t=a(78791),A=a(94664),u=a(22096),d=a(65763),h=a(72246),o=a(81896),U=a(75911),L=a(49787),E=a(34909);let y=((P=class{constructor(l,i,g,x,D){this.fb=l,this.activatedRoute=i,this.systemConfigDataService=g,this.breakpointService=x,this.paywallService=D,this.loginAttribute="email",this.faEnvelope=f.FU$,this.type="create",this.isSmallScreen=this.breakpointService.isSmallScreen,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.accessByTabs=[{control:"apps"},{control:"users"},{control:"services"},{control:"apidocs",label:"api-docs"},{control:"schema/data",label:"schema"},{control:"files"},{control:"scripts"},{control:"config"},{control:"packages",label:"package-manager"},{control:"limits"},{control:"scheduler"}],this.themeService=(0,m.f3M)(d.F),this.snackbarService=(0,m.f3M)(h.w),this.isDarkMode=this.themeService.darkMode$,this.userForm=this.fb.group({profileDetailsGroup:this.fb.group({username:["",e.kI.minLength(16)],email:["",e.kI.email],firstName:[""],lastName:[""],name:["",e.kI.required],phone:[""]}),isActive:[!0],tabs:this.buildTabs(),lookupKeys:this.fb.array([],[M.E]),appRoles:this.fb.array([])})}get cancelRoute(){let l=`/${p.Z.ADMIN_SETTINGS}/`;return"admins"===this.userType&&(l+=p.Z.ADMINS),"users"===this.userType&&(l+=p.Z.USERS),l}ngOnInit(){this.paywallService.activatePaywall("limit").pipe((0,A.w)(l=>l?this.paywallService.activatePaywall("service_report"):(0,u.of)(!1))).subscribe(l=>{l&&(this.accessByTabs=[])}),this.activatedRoute.data.subscribe(({type:l,data:i,apps:g,roles:x})=>{i&&this.snackbarService.setSnackbarLastEle(i.name,!0),this.type=l,"users"===this.userType&&(this.apps=g.resource,this.roles=x.resource),"edit"===l?(this.currentProfile=i,this.userForm.patchValue({profileDetailsGroup:{username:i.username,email:i.email,firstName:i.firstName,lastName:i.lastName,name:i.name,phone:i.phone},isActive:i.isActive}),this.userForm.addControl("setPassword",new e.NI(!1)),this.userForm.controls.setPassword.valueChanges.subscribe(D=>{D?this.addPasswordControls():this.removePasswordControls()}),"admins"===this.userType&&(i.isRootAdmin&&this.userForm.removeControl("tabs"),i.userToAppToRoleByUserId.length>0&&(this.changeAllTabs(!1),i.role.accessibleTabs.forEach(D=>{const C=this.tabs.controls.find(O=>O.value.name===D);C&&C.patchValue({checked:!0})}))),"users"===this.userType&&i.userToAppToRoleByUserId.length>0&&i.userToAppToRoleByUserId.forEach(D=>{this.userForm.controls.appRoles.push(new e.cw({app:new e.NI(this.apps.find(C=>C.id===D.appId)?.name,[e.kI.required]),role:new e.NI(this.roles.find(C=>C.id===D.roleId)?.name,[e.kI.required])}))}),i.lookupByUserId.length>0&&i.lookupByUserId.forEach(D=>{this.userForm.controls.lookupKeys.push(new e.cw({name:new e.NI(D.name,[e.kI.required]),value:new e.NI(D.value),private:new e.NI(D.private),id:new e.NI(D.id)}))})):(this.currentProfile={id:0},this.userForm.addControl("pass-invite",new e.NI("",[e.kI.required])),this.userForm.controls["pass-invite"].valueChanges.subscribe(D=>{"password"===D?this.addPasswordControls():this.removePasswordControls()}))}),this.systemConfigDataService.environment$.subscribe(l=>{this.loginAttribute=l.authentication.loginAttribute,"username"===this.loginAttribute?this.userForm.get("profileDetailsGroup.username")?.addValidators([e.kI.required]):this.userForm.get("profileDetailsGroup.email")?.addValidators([e.kI.required])})}addPasswordControls(){this.userForm.addControl("password",new e.NI("",[e.kI.required,e.kI.minLength(16)])),this.userForm.addControl("confirmPassword",new e.NI("",[e.kI.required,(0,_.t)("password")]))}removePasswordControls(){this.userForm.removeControl("password"),this.userForm.removeControl("confirmPassword")}get tabs(){return this.userForm.controls.tabs}selectAllTabs(l){this.changeAllTabs(l.checked)}changeAllTabs(l){this.tabs.controls.forEach(i=>{i.patchValue({checked:l})})}get allTabsSelected(){return this.tabs.controls.every(l=>l.value.checked)}buildTabs(){const l=this.accessByTabs.map(i=>this.fb.group({name:i.control,title:i.label||i.control,checked:!0}));return this.fb.array(l)}triggerAlert(l,i){this.alertType=l,this.alertMsg=i,this.showAlert=!0}}).\u0275fac=function(l){return new(l||P)(m.Y36(e.qu),m.Y36(o.gz),m.Y36(U.s),m.Y36(L.y),m.Y36(E._))},P.\u0275cmp=m.Xpm({type:P,selectors:[["df-user-details"]],decls:0,vars:0,template:function(l,i){},encapsulation:2}),P);y=(0,c.gn)([(0,t.c)({checkProperties:!0})],y)},54475:(R,T,a)=>{a.d(T,{n:()=>m});const c=[{regex:/Duplicate entry '([^']+)' for key 'user_email_unique'/,message:"alerts.duplicateEmail"}];function m(e){if(!e)return"alert.genericError";const _=c.find(p=>p.regex.test(e));return _?_.message:e}},92418:(R,T,a)=>{function c(m){return e=>{const _=e.parent;if(_){const p=_.get(m);if(p&&e.value!==p.value)return{doesNotMatch:!0}}return null}}a.d(T,{t:()=>c})},42281:(R,T,a)=>{a.d(T,{E:()=>m});var c=a(56223);const m=e=>{const _=new Map,p=e;function M(t){p.at(t).get("name")?.setErrors({notUnique:!0})}return p.controls.forEach((t,A)=>{if(!(t instanceof c.cw))return;const u=t.get("name");if(!u)return;const d=u.value;d&&(_.has(d)?(M(_.get(d)??0),M(A)):(_.set(d,A),function f(t){const u=p.at(t).get("name"),d=u?.errors;d&&(delete d.notUnique,u.setErrors(Object.keys(d).length?d:null))}(A)))}),null}}}]);