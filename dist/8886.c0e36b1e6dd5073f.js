"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[8886],{51425:(F,C,r)=>{r.d(C,{W:()=>M});var _=r(17705),c=r(60177),e=r(88834),m=r(20060),p=r(45383);function R(f,d){if(1&f){const g=_.RV6();_.j41(0,"button",5),_.bIt("click",function(){_.eBV(g);const I=_.XpG(2);return _.Njj(I.dismissAlert())}),_.j41(1,"fa-icon",6),_.EFF(2),_.k0s()()}if(2&f){const g=_.XpG(2);_.R7$(1),_.Y8G("icon",g.faXmark),_.R7$(1),_.JRh("alerts.close")}}function u(f,d){if(1&f&&(_.j41(0,"div",1),_.nrm(1,"fa-icon",2),_.j41(2,"span",3),_.SdG(3),_.k0s(),_.DNE(4,R,3,2,"button",4),_.k0s()),2&f){const g=_.XpG();_.HbH(g.alertType),_.R7$(1),_.Y8G("icon",g.icon),_.R7$(3),_.Y8G("ngIf",g.dismissible)}}const o=["*"];let M=(()=>{class f{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new _.bkB,this.faXmark=p.Jyw}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return p.SGM;case"error":return p.rfe;case"warning":return p.tUE;default:return p.iW_}}static{this.\u0275fac=function(t){return new(t||f)}}static{this.\u0275cmp=_.VBU({type:f,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[_.aNF],ngContentSelectors:o,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(t,I){1&t&&(_.NAR(),_.DNE(0,u,5,4,"div",0)),2&t&&_.Y8G("ngIf",I.showAlert)},dependencies:[c.bT,e.Hl,e.iY,m.dX,m.aY],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]})}}return f})()},58751:(F,C,r)=>{r.d(C,{S:()=>b});var _=r(31635),c=r(60177),e=r(17705),m=r(89417),p=r(32102),R=r(88834),u=r(9159),o=r(99631),M=r(30450),f=r(20060),d=r(9454),g=r(45383),t=r(33609),I=r(49894),y=r(52868);function G(a,l){if(1&a&&(e.j41(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e.EFF(4),e.nI1(5,"transloco"),e.k0s(),e.j41(6,"mat-panel-description"),e.EFF(7),e.nI1(8,"transloco"),e.k0s()(),e.eu8(9,3),e.k0s()()),2&a){e.XpG();const n=e.sdS(4);e.R7$(4),e.SpI(" ",e.bMT(5,3,"lookupKeys.label"),""),e.R7$(3),e.JRh(e.bMT(8,5,"lookupKeys.desc")),e.R7$(2),e.Y8G("ngTemplateOutlet",n)}}function k(a,l){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"name")," "))}function U(a,l){1&a&&(e.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",18),e.k0s()()),2&a&&(e.Y8G("formGroupName",l.index),e.R7$(3),e.JRh(e.bMT(4,2,"name")))}function s(a,l){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"value")," "))}function i(a,l){1&a&&(e.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",19),e.k0s()()),2&a&&(e.Y8G("formGroupName",l.index),e.R7$(3),e.JRh(e.bMT(4,2,"value")))}function T(a,l){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"private")," "))}function E(a,l){1&a&&(e.j41(0,"mat-cell",16),e.nrm(1,"mat-slide-toggle",20),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.Y8G("formGroupName",l.index),e.R7$(1),e.BMQ("aria-label",e.bMT(2,2,"name")))}function D(a,l){if(1&a){const n=e.RV6();e.j41(0,"mat-header-cell")(1,"button",21),e.bIt("click",function(){e.eBV(n);const O=e.XpG(2);return e.Njj(O.add())}),e.nI1(2,"transloco"),e.nrm(3,"fa-icon",22),e.k0s()()}if(2&a){const n=e.XpG(2);e.R7$(1),e.BMQ("aria-label",e.bMT(2,2,"newEntry")),e.R7$(2),e.Y8G("icon",n.faPlus)}}function P(a,l){if(1&a){const n=e.RV6();e.j41(0,"mat-cell",16)(1,"button",23),e.bIt("click",function(){const B=e.eBV(n).index,L=e.XpG(2);return e.Njj(L.remove(B))}),e.nrm(2,"fa-icon",24),e.k0s()()}if(2&a){const n=l.index,h=e.XpG(2);e.Y8G("formGroupName",n),e.R7$(2),e.Y8G("icon",h.faTrashCan)}}function v(a,l){1&a&&e.nrm(0,"mat-header-row")}function A(a,l){1&a&&e.nrm(0,"mat-row")}function K(a,l){1&a&&(e.j41(0,"tr",25)(1,"td",26),e.EFF(2),e.nI1(3,"transloco"),e.k0s()()),2&a&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lookupKeys.noKeys")," "))}function N(a,l){if(1&a&&(e.qex(0,4)(1,5),e.j41(2,"mat-table",6),e.qex(3,7),e.DNE(4,k,3,3,"mat-header-cell",8),e.DNE(5,U,6,4,"mat-cell",9),e.bVm(),e.qex(6,10),e.DNE(7,s,3,3,"mat-header-cell",8),e.DNE(8,i,6,4,"mat-cell",9),e.bVm(),e.qex(9,11),e.DNE(10,T,3,3,"mat-header-cell",8),e.DNE(11,E,3,4,"mat-cell",9),e.bVm(),e.qex(12,12),e.DNE(13,D,4,4,"mat-header-cell",8),e.DNE(14,P,3,2,"mat-cell",9),e.bVm(),e.DNE(15,v,1,0,"mat-header-row",13),e.DNE(16,A,1,0,"mat-row",14),e.DNE(17,K,4,3,"tr",15),e.k0s(),e.bVm()()),2&a){const n=e.XpG();e.Y8G("formGroup",n.rootForm),e.R7$(2),e.Y8G("dataSource",n.dataSource),e.R7$(13),e.Y8G("matHeaderRowDef",n.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",n.displayedColumns)}}let b=class S{constructor(l,n){this.rootFormGroup=l,this.themeService=n,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=g.sjs,this.faPlus=g.QLR,this.showAccordion=!0,this.lookupDeleted=new e.bkB,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(l=>{l.get("id")?.value&&l.get("name")?.disable()}),this.dataSource=new u.I6(this.lookupKeys.controls)}add(){this.lookupKeys.push(new m.gE({name:new m.MJ("",m.k0.required),value:new m.MJ(""),private:new m.MJ(!1)})),this.updateDataSource()}remove(l){const n=this.lookupKeys.at(l).value;n.id&&this.lookupDeleted.emit(n),this.lookupKeys.removeAt(l),this.updateDataSource()}static{this.\u0275fac=function(n){return new(n||S)(e.rXU(m.j4),e.rXU(y.n))}}static{this.\u0275cmp=e.VBU({type:S,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},outputs:{lookupDeleted:"lookupDeleted"},standalone:!0,features:[e.aNF],decls:5,vars:6,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["color","primary","formControlName","private"],["mat-mini-fab","","type","button",1,"save-btn",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",1,"remove-btn",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(n,h){if(1&n&&(e.j41(0,"div",0),e.nI1(1,"async"),e.DNE(2,G,10,7,"mat-accordion",1),e.DNE(3,N,18,4,"ng-template",null,2,e.C5r),e.k0s()),2&n){const O=e.sdS(4);e.HbH(e.bMT(1,4,h.isDarkMode)?"dark-theme":""),e.R7$(2),e.Y8G("ngIf",h.showAccordion)("ngIfElse",O)}},dependencies:[m.YN,m.me,m.BC,m.cb,m.X1,m.j4,m.JD,m.$R,m.v8,c.bT,c.T3,p.RG,p.rl,p.nJ,R.Hl,R.iY,R.$0,u.tP,u.Zl,u.tL,u.ji,u.cC,u.YV,u.iL,u.KS,u.$R,u.YZ,u.NB,u.ky,o.fS,o.fg,M.mV,M.sG,f.dX,f.aY,d.MY,d.BS,d.GK,d.Z2,d.WN,d.Q6,t.Kj,c.Jj],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]})}};b=(0,_.Cg)([(0,I.d)({checkProperties:!0})],b)},77493:(F,C,r)=>{r.d(C,{D:()=>U});var _=r(31635),c=r(60177),e=r(89417),m=r(32102),p=r(99631),R=r(33609),u=r(49894),o=r(17705),M=r(52868);function f(s,i){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.username.errors.required")," "))}function d(s,i){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.username.errors.minLength")," "))}function g(s,i){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.email.errors.invalid")," "))}function t(s,i){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.email.errors.required")," "))}function I(s,i){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.firstName.errors.required")," "))}function y(s,i){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.lastName.errors.required")," "))}function G(s,i){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.displayName.errors.required")," "))}function k(s,i){1&s&&(o.j41(0,"mat-form-field",2)(1,"mat-label"),o.EFF(2),o.nI1(3,"transloco"),o.k0s(),o.nrm(4,"input",10),o.k0s()),2&s&&(o.R7$(2),o.JRh(o.bMT(3,1,"userManagement.controls.phone.label")))}let U=class x{constructor(i,T){this.rootFormGroup=i,this.themeService=T,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()})}controlExists(i){return null!==this.rootForm.get(i)}isRequired(i){return!!this.rootForm.get(i)?.hasValidator(e.k0.required)}static{this.\u0275fac=function(T){return new(T||x)(o.rXU(e.j4),o.rXU(M.n))}}static{this.\u0275cmp=o.VBU({type:x,selectors:[["df-profile-details"]],standalone:!0,features:[o.aNF],decls:37,vars:31,consts:[["name","user-details-section",3,"formGroup"],["formGroupName","profileDetailsGroup"],["appearance","outline"],["matInput","","type","text","formControlName","username"],[4,"ngIf"],["matInput","","type","email","formControlName","email"],["matInput","","type","text","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","name"],["appearance","outline",4,"ngIf"],["matInput","","formControlName","phone"]],template:function(T,E){if(1&T&&(o.qex(0,0),o.nI1(1,"async"),o.qex(2,1),o.j41(3,"mat-form-field",2)(4,"mat-label"),o.EFF(5),o.nI1(6,"transloco"),o.nI1(7,"transloco"),o.k0s(),o.nrm(8,"input",3),o.DNE(9,f,3,3,"mat-error",4),o.DNE(10,d,3,3,"mat-error",4),o.k0s(),o.j41(11,"mat-form-field",2)(12,"mat-label"),o.EFF(13),o.nI1(14,"transloco"),o.k0s(),o.nrm(15,"input",5),o.DNE(16,g,3,3,"mat-error",4),o.DNE(17,t,3,3,"mat-error",4),o.k0s(),o.j41(18,"mat-form-field",2)(19,"mat-label"),o.EFF(20),o.nI1(21,"transloco"),o.k0s(),o.nrm(22,"input",6),o.DNE(23,I,3,3,"mat-error",4),o.k0s(),o.j41(24,"mat-form-field",2)(25,"mat-label"),o.EFF(26),o.nI1(27,"transloco"),o.k0s(),o.nrm(28,"input",7),o.DNE(29,y,3,3,"mat-error",4),o.k0s(),o.j41(30,"mat-form-field",2)(31,"mat-label"),o.EFF(32),o.nI1(33,"transloco"),o.k0s(),o.nrm(34,"input",8),o.DNE(35,G,3,3,"mat-error",4),o.k0s(),o.DNE(36,k,5,3,"mat-form-field",9),o.bVm()()),2&T){let D,P,v,A,K,N,b;o.HbH(o.bMT(1,17,E.isDarkMode)?"dark-theme":""),o.Y8G("formGroup",E.rootForm),o.R7$(5),o.Lme("",o.bMT(6,19,"userManagement.controls.username.altLabel"),"",E.isRequired("profileDetailsGroup.username")?"":" "+o.bMT(7,21,"userManagement.controls.username.optional"),""),o.R7$(4),o.Y8G("ngIf",null==(D=E.rootForm.get("profileDetailsGroup.username"))||null==D.errors?null:D.errors.required),o.R7$(1),o.Y8G("ngIf",null==(P=E.rootForm.get("profileDetailsGroup.username"))||null==P.errors?null:P.errors.minlength),o.R7$(3),o.SpI(" ",o.bMT(14,23,"userManagement.controls.email.label"),""),o.R7$(3),o.Y8G("ngIf",(null==(v=E.rootForm.get("profileDetailsGroup.email"))||null==v.errors?null:v.errors.email)&&!(null!=(v=E.rootForm.get("profileDetailsGroup.email"))&&null!=v.errors&&v.errors.required)),o.R7$(1),o.Y8G("ngIf",!(null!=(A=E.rootForm.get("profileDetailsGroup.email"))&&null!=A.errors&&A.errors.email)&&(null==(A=E.rootForm.get("profileDetailsGroup.email"))||null==A.errors?null:A.errors.required)),o.R7$(3),o.SpI(" ",o.bMT(21,25,"userManagement.controls.firstName.label"),""),o.R7$(3),o.Y8G("ngIf",null==(K=E.rootForm.get("profileDetailsGroup.firstName"))||null==K.errors?null:K.errors.required),o.R7$(3),o.JRh(o.bMT(27,27,"userManagement.controls.lastName.label")),o.R7$(3),o.Y8G("ngIf",null==(N=E.rootForm.get("profileDetailsGroup.lastName"))||null==N.errors?null:N.errors.required),o.R7$(3),o.JRh(o.bMT(33,29,"userManagement.controls.displayName.label")),o.R7$(3),o.Y8G("ngIf",null==(b=E.rootForm.get("profileDetailsGroup.name"))||null==b.errors?null:b.errors.required),o.R7$(1),o.Y8G("ngIf",E.controlExists("profileDetailsGroup.phone"))}},dependencies:[m.RG,m.rl,m.nJ,m.TL,p.fS,p.fg,e.YN,e.me,e.BC,e.cb,e.X1,e.j4,e.JD,e.$R,R.Kj,c.bT,c.Jj],encapsulation:2})}};U=(0,_.Cg)([(0,u.d)({checkProperties:!0})],U)},30877:(F,C,r)=>{r.d(C,{N:()=>b});var _=r(31635),c=r(89417),e=r(88834),m=r(9159),p=r(99631),R=r(20060),u=r(9454),o=r(60850),M=r(45383),f=r(33609),d=r(60177),g=r(49894),t=r(17705),I=r(86600),y=r(32102);function G(a,l){1&a&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&a&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"roles.app")," "))}function k(a,l){if(1&a&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&a){const n=l.$implicit;t.Y8G("value",n.name),t.R7$(1),t.SpI(" ",n.name," ")}}function U(a,l){if(1&a&&(t.j41(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),t.EFF(3),t.nI1(4,"transloco"),t.k0s(),t.nrm(5,"input",14),t.j41(6,"mat-autocomplete",15,16),t.DNE(8,k,2,2,"mat-option",17),t.k0s()()()),2&a){const n=l.index,h=t.sdS(7),O=t.XpG();t.Y8G("formGroupName",n),t.R7$(3),t.JRh(t.bMT(4,4,"roles.app")),t.R7$(2),t.Y8G("matAutocomplete",h),t.R7$(3),t.Y8G("ngForOf",O.availableApps)}}function s(a,l){1&a&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&a&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"roles.role")," "))}function i(a,l){if(1&a&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&a){const n=l.$implicit;t.Y8G("value",n.name),t.R7$(1),t.SpI(" ",n.name," ")}}function T(a,l){if(1&a&&(t.j41(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),t.EFF(3),t.nI1(4,"transloco"),t.k0s(),t.nrm(5,"input",19),t.j41(6,"mat-autocomplete",15,16),t.DNE(8,i,2,2,"mat-option",17),t.k0s()()()),2&a){const n=l.index,h=t.sdS(7),O=t.XpG();t.Y8G("formGroupName",n),t.R7$(3),t.JRh(t.bMT(4,4,"roles.role")),t.R7$(2),t.Y8G("matAutocomplete",h),t.R7$(3),t.Y8G("ngForOf",O.roles)}}function E(a,l){if(1&a){const n=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(n);const O=t.XpG(2);return t.Njj(O.add())}),t.nI1(1,"transloco"),t.nrm(2,"fa-icon",22),t.k0s()}if(2&a){const n=t.XpG(2);t.BMQ("aria-label",t.bMT(1,2,"newEntry")),t.R7$(2),t.Y8G("icon",n.faPlus)}}function D(a,l){if(1&a&&(t.j41(0,"mat-header-cell"),t.DNE(1,E,3,4,"button",20),t.k0s()),2&a){const n=t.XpG();t.R7$(1),t.Y8G("ngIf",n.showAddButton)}}function P(a,l){if(1&a){const n=t.RV6();t.j41(0,"mat-cell",12)(1,"button",23),t.bIt("click",function(){const B=t.eBV(n).index,L=t.XpG();return t.Njj(L.remove(B))}),t.nrm(2,"fa-icon",24),t.k0s()()}if(2&a){const n=l.index,h=t.XpG();t.Y8G("formGroupName",n),t.R7$(2),t.Y8G("icon",h.faTrashCan)}}function v(a,l){1&a&&t.nrm(0,"mat-header-row")}function A(a,l){1&a&&t.nrm(0,"mat-row")}function K(a,l){1&a&&(t.j41(0,"tr",25)(1,"td",26),t.EFF(2),t.nI1(3,"transloco"),t.k0s()()),2&a&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"roles.noRoles")," "))}const N=function(a,l){return{assigned:a,total:l}};let b=class ${constructor(l){this.rootFormGroup=l,this.apps=[],this.roles=[],this.displayedColumns=["app","role","actions"],this.faTrashCan=M.sjs,this.faPlus=M.QLR}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()}),this.appRoles=this.rootForm.get("appRoles"),this.updateDataSource()}updateDataSource(){this.dataSource=new m.I6(this.appRoles.controls)}get availableApps(){return this.apps.filter(l=>!this.appRoles.value.find(n=>n.app===l.name))}get showAddButton(){return this.appRoles.length<this.apps.length}get assignedApps(){return this.apps.length-this.appRoles.length}add(){this.appRoles.push(new c.gE({app:new c.MJ("",c.k0.required),role:new c.MJ("",c.k0.required)})),this.updateDataSource()}remove(l){this.appRoles.removeAt(l),this.updateDataSource()}static{this.\u0275fac=function(n){return new(n||$)(t.rXU(c.j4))}}static{this.\u0275cmp=t.VBU({type:$,selectors:[["df-user-app-roles"]],inputs:{apps:"apps",roles:"roles"},standalone:!0,features:[t.aNF],decls:25,vars:14,consts:[[1,"app-roles-keys-accordion"],[3,"formGroup"],["formArrayName","appRoles"],[3,"dataSource"],["matColumnDef","app"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"formGroupName"],["subscriptSizing","dynamic"],["matInput","","formControlName","app",3,"matAutocomplete"],["requireSelection",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","role",3,"matAutocomplete"],["mat-mini-fab","","color","primary","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary","type","button",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",3,"click"],["size","xs",3,"icon"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(n,h){1&n&&(t.j41(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),t.EFF(5),t.nI1(6,"transloco"),t.k0s(),t.j41(7,"mat-panel-description"),t.EFF(8),t.nI1(9,"transloco"),t.k0s()(),t.qex(10,1)(11,2),t.j41(12,"mat-table",3),t.qex(13,4),t.DNE(14,G,3,3,"mat-header-cell",5),t.DNE(15,U,9,6,"mat-cell",6),t.bVm(),t.qex(16,7),t.DNE(17,s,3,3,"mat-header-cell",5),t.DNE(18,T,9,6,"mat-cell",6),t.bVm(),t.qex(19,8),t.DNE(20,D,2,1,"mat-header-cell",5),t.DNE(21,P,3,2,"mat-cell",6),t.bVm(),t.DNE(22,v,1,0,"mat-header-row",9),t.DNE(23,A,1,0,"mat-row",10),t.DNE(24,K,4,3,"tr",11),t.k0s(),t.bVm()(),t.k0s()()()),2&n&&(t.R7$(5),t.SpI(" ",t.bMT(6,6,"roles.label"),""),t.R7$(3),t.JRh(t.i5U(9,8,"roles.appRoleAssigned",t.l_i(11,N,h.apps.length-h.availableApps.length,h.apps.length))),t.R7$(2),t.Y8G("formGroup",h.rootForm),t.R7$(2),t.Y8G("dataSource",h.dataSource),t.R7$(10),t.Y8G("matHeaderRowDef",h.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",h.displayedColumns))},dependencies:[c.YN,c.me,c.BC,c.cb,c.X1,c.j4,c.JD,c.$R,c.v8,o.jL,o.$3,I.wT,o.pN,e.Hl,e.iY,e.$0,m.tP,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,m.ky,p.fS,p.fg,y.rl,y.nJ,R.dX,R.aY,u.MY,u.BS,u.GK,u.Z2,u.WN,u.Q6,f.Kj,d.bT,d.pM],styles:[".app-roles-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%]{max-width:10%}"]})}};b=(0,_.Cg)([(0,g.d)({checkProperties:!0})],b)},76765:(F,C,r)=>{r.d(C,{s:()=>k});var _=r(31635),c=r(17705),e=r(89417),m=r(69465),p=r(23472),R=r(80345),u=r(45383),o=r(49894),M=r(25558),f=r(7673),d=r(52868),g=r(44984),t=r(18498),I=r(82298),y=r(52608),G=r(95351);let k=class j{constructor(s,i,T,E,D){this.fb=s,this.activatedRoute=i,this.systemConfigDataService=T,this.breakpointService=E,this.paywallService=D,this.loginAttribute="email",this.faEnvelope=u.y_8,this.type="create",this.isSmallScreen=this.breakpointService.isSmallScreen,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.accessByTabs=[{control:"apps"},{control:"users"},{control:"services"},{control:"apidocs",label:"api-docs"},{control:"schema/data",label:"schema"},{control:"files"},{control:"scripts"},{control:"config"},{control:"packages",label:"package-manager"},{control:"limits"},{control:"scheduler"}],this.themeService=(0,c.WQX)(d.n),this.snackbarService=(0,c.WQX)(g.L),this.isDarkMode=this.themeService.darkMode$,this.userForm=this.fb.group({profileDetailsGroup:this.fb.group({username:["",e.k0.minLength(6)],email:["",e.k0.email],firstName:[""],lastName:[""],name:["",e.k0.required],phone:[""]}),isActive:[!0],tabs:this.buildTabs(),lookupKeys:this.fb.array([],[R.D]),appRoles:this.fb.array([])})}get cancelRoute(){let s=`/${p.b.ADMIN_SETTINGS}/`;return"admins"===this.userType&&(s+=p.b.ADMINS),"users"===this.userType&&(s+=p.b.USERS),s}ngOnInit(){this.paywallService.activatePaywall("limit").pipe((0,M.n)(s=>s?this.paywallService.activatePaywall("service_report"):(0,f.of)(!1))).subscribe(s=>{s&&(this.accessByTabs=[])}),this.activatedRoute.data.subscribe(({type:s,data:i,apps:T,roles:E})=>{i&&this.snackbarService.setSnackbarLastEle(i.name,!0),this.type=s,"users"===this.userType&&(this.apps=T.resource,this.roles=E.resource),"edit"===s?(this.currentProfile=i,this.userForm.patchValue({profileDetailsGroup:{username:i.username,email:i.email,firstName:i.firstName,lastName:i.lastName,name:i.name,phone:i.phone},isActive:i.isActive}),this.userForm.addControl("setPassword",new e.MJ(!1)),this.userForm.controls.setPassword.valueChanges.subscribe(D=>{D?this.addPasswordControls():this.removePasswordControls()}),"admins"===this.userType&&(i.isRootAdmin&&this.userForm.removeControl("tabs"),i.userToAppToRoleByUserId.length>0&&(this.changeAllTabs(!1),i.role.accessibleTabs.forEach(D=>{const P=this.tabs.controls.find(v=>v.value.name===D);P&&P.patchValue({checked:!0})}))),"users"===this.userType&&i.userToAppToRoleByUserId.length>0&&i.userToAppToRoleByUserId.forEach(D=>{this.userForm.controls.appRoles.push(new e.gE({app:new e.MJ(this.apps.find(P=>P.id===D.appId)?.name,[e.k0.required]),role:new e.MJ(this.roles.find(P=>P.id===D.roleId)?.name,[e.k0.required])}))}),i.lookupByUserId.length>0&&i.lookupByUserId.forEach(D=>{this.userForm.controls.lookupKeys.push(new e.gE({name:new e.MJ(D.name,[e.k0.required]),value:new e.MJ(D.value),private:new e.MJ(D.private),id:new e.MJ(D.id)}))})):(this.currentProfile={id:0},this.userForm.addControl("pass-invite",new e.MJ("",[e.k0.required])),this.userForm.controls["pass-invite"].valueChanges.subscribe(D=>{"password"===D?this.addPasswordControls():this.removePasswordControls()}))}),this.systemConfigDataService.environment$.subscribe(s=>{this.loginAttribute=s.authentication.loginAttribute,"username"===this.loginAttribute?this.userForm.get("profileDetailsGroup.username")?.addValidators([e.k0.required]):this.userForm.get("profileDetailsGroup.email")?.addValidators([e.k0.required])})}addPasswordControls(){this.userForm.addControl("password",new e.MJ("",[e.k0.required,e.k0.minLength(16)])),this.userForm.addControl("confirmPassword",new e.MJ("",[e.k0.required,(0,m.e)("password")]))}removePasswordControls(){this.userForm.removeControl("password"),this.userForm.removeControl("confirmPassword")}get tabs(){return this.userForm.controls.tabs}selectAllTabs(s){this.changeAllTabs(s.checked)}changeAllTabs(s){this.tabs.controls.forEach(i=>{i.patchValue({checked:s})})}get allTabsSelected(){return this.tabs.controls.every(s=>s.value.checked)}buildTabs(){const s=this.accessByTabs.map(i=>this.fb.group({name:i.control,title:i.label||i.control,checked:!0}));return this.fb.array(s)}triggerAlert(s,i){this.alertType=s,this.alertMsg=i,this.showAlert=!0}static{this.\u0275fac=function(i){return new(i||j)(c.rXU(e.ok),c.rXU(t.nX),c.rXU(I.f),c.rXU(y.R),c.rXU(G.o))}}static{this.\u0275cmp=c.VBU({type:j,selectors:[["df-user-details"]],decls:0,vars:0,template:function(i,T){},encapsulation:2})}};k=(0,_.Cg)([(0,o.d)({checkProperties:!0})],k)},53012:(F,C,r)=>{r.d(C,{u:()=>c});const _=[{regex:/Duplicate entry '([^']+)' for key 'user_email_unique'/,message:"alerts.duplicateEmail"}];function c(e){if(!e)return"alert.genericError";const m=_.find(p=>p.regex.test(e));return m?m.message:e}},69465:(F,C,r)=>{function _(c){return e=>{const m=e.parent;if(m){const p=m.get(c);if(p&&e.value!==p.value)return{doesNotMatch:!0}}return null}}r.d(C,{e:()=>_})},80345:(F,C,r)=>{r.d(C,{D:()=>c});var _=r(89417);const c=e=>{const m=new Map,p=e;function R(o){p.at(o).get("name")?.setErrors({notUnique:!0})}return p.controls.forEach((o,M)=>{if(!(o instanceof _.gE))return;const f=o.get("name");if(!f)return;const d=f.value;d&&(m.has(d)?(R(m.get(d)??0),R(M)):(m.set(d,M),function u(o){const f=p.at(o).get("name"),d=f?.errors;d&&(delete d.notUnique,f.setErrors(Object.keys(d).length?d:null))}(M)))}),null}}}]);