"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[8019],{68019:(R,h,a)=>{a.r(h),a.d(h,{DfGlobalLookupKeysComponent:()=>E});var M=a(31635),_=a(89417),r=a(58751),f=a(80345),d=a(33609),l=a(88834),y=a(24784),u=a(49894),t=a(17705),c=a(18498);a(36225);let E=class g{constructor(e,m,D){this.crudService=e,this.fb=m,this.activatedRoute=D,this.lookupKeysForm=this.fb.group({lookupKeys:this.fb.array([],[f.D])})}ngOnInit(){this.activatedRoute.data.subscribe(({data:e})=>{e.resource.length>0&&e.resource.forEach(m=>{this.lookupKeysForm.controls.lookupKeys.push(new _.gE({name:new _.MJ(m.name,[_.k0.required]),value:new _.MJ(m.value),private:new _.MJ(m.private),id:new _.MJ(m.id)}))})})}save(){if(this.lookupKeysForm.invalid||this.lookupKeysForm.pristine)return;const e=[],m=[];this.lookupKeysForm.get("lookupKeys").controls.forEach(p=>{p.pristine||(p.value.id?m.push(p.value):e.push({...p.value,id:null}))}),e.length>0&&this.crudService.create({resource:e},{fields:"*",snackbarSuccess:"lookupKeys.alerts.createSuccess"}).subscribe(),m.length>0&&m.forEach(p=>{p.id&&this.crudService.update(p.id,p,{snackbarSuccess:"lookupKeys.alerts.updateSuccess"}).subscribe()})}static{this.\u0275fac=function(m){return new(m||g)(t.rXU(y.mr),t.rXU(_.ok),t.rXU(c.nX))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["df-global-lookup-keys"]],standalone:!0,features:[t.aNF],decls:8,vars:8,consts:[[3,"formGroup","ngSubmit"],["formArrayName","lookupKeys",3,"showAccordion"],["mat-flat-button","","type","submit",1,"save-btn"]],template:function(m,D){1&m&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"transloco"),t.k0s(),t.j41(3,"form",0),t.bIt("ngSubmit",function(){return D.save()}),t.nrm(4,"df-lookup-keys",1),t.j41(5,"button",2),t.EFF(6),t.nI1(7,"transloco"),t.k0s()()),2&m&&(t.R7$(1),t.JRh(t.bMT(2,4,"lookupKeys.fullDesc")),t.R7$(2),t.Y8G("formGroup",D.lookupKeysForm),t.R7$(1),t.Y8G("showAccordion",!1),t.R7$(2),t.SpI(" ",t.bMT(7,6,"save")," "))},dependencies:[r.S,_.X1,_.qT,_.cb,_.j4,_.v8,d.Kj,l.Hl,l.$z]})}};E=(0,M.Cg)([(0,u.d)({checkProperties:!0})],E)},58751:(R,h,a)=>{a.d(h,{S:()=>k});var M=a(31635),_=a(60177),r=a(89417),f=a(32102),d=a(88834),l=a(9159),y=a(99631),u=a(30450),t=a(20060),c=a(9454),i=a(45383),E=a(33609),T=a(49894),e=a(17705),m=a(52868);function D(o,s){if(1&o&&(e.j41(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e.EFF(4),e.nI1(5,"transloco"),e.k0s(),e.j41(6,"mat-panel-description"),e.EFF(7),e.nI1(8,"transloco"),e.k0s()(),e.eu8(9,3),e.k0s()()),2&o){e.XpG();const n=e.sdS(4);e.R7$(4),e.SpI(" ",e.bMT(5,3,"lookupKeys.label"),""),e.R7$(3),e.JRh(e.bMT(8,5,"lookupKeys.desc")),e.R7$(2),e.Y8G("ngTemplateOutlet",n)}}function p(o,s){1&o&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"name")," "))}function O(o,s){1&o&&(e.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",18),e.k0s()()),2&o&&(e.Y8G("formGroupName",s.index),e.R7$(3),e.JRh(e.bMT(4,2,"name")))}function P(o,s){1&o&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"value")," "))}function I(o,s){1&o&&(e.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",19),e.k0s()()),2&o&&(e.Y8G("formGroupName",s.index),e.R7$(3),e.JRh(e.bMT(4,2,"value")))}function L(o,s){1&o&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"private")," "))}function b(o,s){1&o&&(e.j41(0,"mat-cell",16),e.nrm(1,"mat-slide-toggle",20),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.Y8G("formGroupName",s.index),e.R7$(1),e.BMQ("aria-label",e.bMT(2,2,"name")))}function G(o,s){if(1&o){const n=e.RV6();e.j41(0,"mat-header-cell")(1,"button",21),e.bIt("click",function(){e.eBV(n);const C=e.XpG(2);return e.Njj(C.add())}),e.nI1(2,"transloco"),e.nrm(3,"fa-icon",22),e.k0s()()}if(2&o){const n=e.XpG(2);e.R7$(1),e.BMQ("aria-label",e.bMT(2,2,"newEntry")),e.R7$(2),e.Y8G("icon",n.faPlus)}}function A(o,s){if(1&o){const n=e.RV6();e.j41(0,"mat-cell",16)(1,"button",23),e.bIt("click",function(){const N=e.eBV(n).index,x=e.XpG(2);return e.Njj(x.remove(N))}),e.nrm(2,"fa-icon",24),e.k0s()()}if(2&o){const n=s.index,K=e.XpG(2);e.Y8G("formGroupName",n),e.R7$(2),e.Y8G("icon",K.faTrashCan)}}function B(o,s){1&o&&e.nrm(0,"mat-header-row")}function F(o,s){1&o&&e.nrm(0,"mat-row")}function U(o,s){1&o&&(e.j41(0,"tr",25)(1,"td",26),e.EFF(2),e.nI1(3,"transloco"),e.k0s()()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lookupKeys.noKeys")," "))}function S(o,s){if(1&o&&(e.qex(0,4)(1,5),e.j41(2,"mat-table",6),e.qex(3,7),e.DNE(4,p,3,3,"mat-header-cell",8),e.DNE(5,O,6,4,"mat-cell",9),e.bVm(),e.qex(6,10),e.DNE(7,P,3,3,"mat-header-cell",8),e.DNE(8,I,6,4,"mat-cell",9),e.bVm(),e.qex(9,11),e.DNE(10,L,3,3,"mat-header-cell",8),e.DNE(11,b,3,4,"mat-cell",9),e.bVm(),e.qex(12,12),e.DNE(13,G,4,4,"mat-header-cell",8),e.DNE(14,A,3,2,"mat-cell",9),e.bVm(),e.DNE(15,B,1,0,"mat-header-row",13),e.DNE(16,F,1,0,"mat-row",14),e.DNE(17,U,4,3,"tr",15),e.k0s(),e.bVm()()),2&o){const n=e.XpG();e.Y8G("formGroup",n.rootForm),e.R7$(2),e.Y8G("dataSource",n.dataSource),e.R7$(13),e.Y8G("matHeaderRowDef",n.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",n.displayedColumns)}}let k=class v{constructor(s,n){this.rootFormGroup=s,this.themeService=n,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=i.sjs,this.faPlus=i.QLR,this.showAccordion=!0,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(s=>{s.get("id")?.value&&s.get("name")?.disable()}),this.dataSource=new l.I6(this.lookupKeys.controls)}add(){this.lookupKeys.push(new r.gE({name:new r.MJ("",r.k0.required),value:new r.MJ(""),private:new r.MJ(!1)})),this.updateDataSource()}remove(s){this.lookupKeys.removeAt(s),this.updateDataSource()}static{this.\u0275fac=function(n){return new(n||v)(e.rXU(r.j4),e.rXU(m.n))}}static{this.\u0275cmp=e.VBU({type:v,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},standalone:!0,features:[e.aNF],decls:5,vars:6,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["color","primary","formControlName","private"],["mat-mini-fab","","type","button",1,"save-btn",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",1,"remove-btn",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(n,K){if(1&n&&(e.j41(0,"div",0),e.nI1(1,"async"),e.DNE(2,D,10,7,"mat-accordion",1),e.DNE(3,S,18,4,"ng-template",null,2,e.C5r),e.k0s()),2&n){const C=e.sdS(4);e.HbH(e.bMT(1,4,K.isDarkMode)?"dark-theme":""),e.R7$(2),e.Y8G("ngIf",K.showAccordion)("ngIfElse",C)}},dependencies:[r.YN,r.me,r.BC,r.cb,r.X1,r.j4,r.JD,r.$R,r.v8,_.bT,_.T3,f.RG,f.rl,f.nJ,d.Hl,d.iY,d.$0,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,l.ky,y.fS,y.fg,u.mV,u.sG,t.dX,t.aY,c.MY,c.BS,c.GK,c.Z2,c.WN,c.Q6,E.Kj,_.Jj],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]})}};k=(0,M.Cg)([(0,T.d)({checkProperties:!0})],k)},80345:(R,h,a)=>{a.d(h,{D:()=>_});var M=a(89417);const _=r=>{const f=new Map,d=r;function l(u){d.at(u).get("name")?.setErrors({notUnique:!0})}return d.controls.forEach((u,t)=>{if(!(u instanceof M.gE))return;const c=u.get("name");if(!c)return;const i=c.value;i&&(f.has(i)?(l(f.get(i)??0),l(t)):(f.set(i,t),function y(u){const c=d.at(u).get("name"),i=c?.errors;i&&(delete i.notUnique,c.setErrors(Object.keys(i).length?i:null))}(t)))}),null}}}]);