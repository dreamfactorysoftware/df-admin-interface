"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[2991],{42991:(I,h,a)=>{a.r(h),a.d(h,{DfEmailTemplateDetailsComponent:()=>C});var t=a(31635),o=a(89417),f=a(86600),u=a(82798),m=a(99631),d=a(32102),T=a(88834),E=a(60177),M=a(33609),s=a(24784),D=a(49894),i=a(51425),c=a(99437),_=a(18810),e=a(17705),R=a(18498),v=a(52608),O=a(52868),P=a(44984);function F(p,n){1&p&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&p&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"emailTemplates.templateName.error")," "))}function A(p,n){1&p&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&p&&(e.R7$(1),e.JRh(e.bMT(2,1,"update")))}function y(p,n){1&p&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&p&&(e.R7$(1),e.JRh(e.bMT(2,1,"save")))}a(36225);let C=class g{constructor(n,l,r,b,k,j,N){this.crudService=n,this.fb=l,this.router=r,this.breakpointService=b,this.activatedRoute=k,this.themeService=j,this.snackbarService=N,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.isDarkMode=this.themeService.darkMode$,this.emailTemplateForm=this.fb.group({name:["",o.k0.required],description:[""],to:[""],cc:[""],bcc:[""],subject:[""],attachment:[""],body:[""],senderName:[""],senderEmail:[""],replyToName:[""],replyToEmail:[""],id:[null]})}ngOnInit(){this.activatedRoute.data.subscribe(({data:n})=>{this.editApp=n}),this.snackbarService.setSnackbarLastEle(this.editApp.name,!0),this.editApp&&this.emailTemplateForm.patchValue({name:this.editApp.name,description:this.editApp.description,to:this.editApp.to,cc:this.editApp.cc,bcc:this.editApp.bcc,subject:this.editApp.subject,attachment:this.editApp.attachment,body:this.editApp.bodyHtml,senderName:this.editApp.fromName,senderEmail:this.editApp.fromEmail,replyToName:this.editApp.replyToName,replyToEmail:this.editApp.replyToEmail,id:this.editApp.id})}triggerAlert(n,l){this.alertType=n,this.alertMsg=l,this.showAlert=!0}goBack(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}onSubmit(){if(this.emailTemplateForm.invalid)return;const n={name:this.emailTemplateForm.value.name,description:this.emailTemplateForm.value.description,to:this.emailTemplateForm.value.to,cc:this.emailTemplateForm.value.cc,bcc:this.emailTemplateForm.value.bcc,subject:this.emailTemplateForm.value.subject,attachment:this.emailTemplateForm.value.attachment,bodyHtml:this.emailTemplateForm.value.body,fromName:this.emailTemplateForm.value.senderName,fromEmail:this.emailTemplateForm.value.senderEmail,replyToName:this.emailTemplateForm.value.replyToName,replyToEmail:this.emailTemplateForm.value.replyToEmail};this.emailTemplateForm.value.id?this.crudService.update(this.emailTemplateForm.value.id,n,{snackbarSuccess:"emailTemplates.alerts.updateSuccess"}).pipe((0,c.W)(l=>(this.triggerAlert("error",l.error.error.message),(0,_.$)(()=>new Error(l))))).subscribe(()=>{this.goBack()}):this.crudService.create({resource:[n]},{snackbarSuccess:"emailTemplates.alerts.createSuccess"}).pipe((0,c.W)(l=>(this.triggerAlert("error",l.error.error.context.resource[0].message),(0,_.$)(()=>new Error(l))))).subscribe(()=>{this.goBack()})}static{this.\u0275fac=function(l){return new(l||g)(e.rXU(s.F8),e.rXU(o.ok),e.rXU(R.Ix),e.rXU(v.R),e.rXU(R.nX),e.rXU(O.n),e.rXU(P.L))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["df-email-template-details"]],standalone:!0,features:[e.aNF],decls:82,vars:78,consts:[[3,"showAlert","alertType","alertClosed"],[1,"email-template-details-container"],[1,"details-section",3,"formGroup","ngSubmit"],["appearance","outline",1,"dynamic-width"],["matInput","","formControlName","name","required","",3,"placeholder"],[4,"ngIf"],["matInput","","formControlName","description",3,"placeholder"],["appearance","outline",1,"third-width"],["matInput","","formControlName","to"],["matInput","","formControlName","cc"],["matInput","","formControlName","bcc"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","subject",3,"placeholder"],["matInput","","formControlName","attachment",3,"placeholder"],["rows","1","matInput","","formControlName","body",1,"email-template-body"],["matInput","","formControlName","senderName",3,"placeholder"],["matInput","","formControlName","senderEmail",3,"placeholder"],["matInput","","formControlName","replyToName",3,"placeholder"],["matInput","","formControlName","replyToEmail",3,"placeholder"],[1,"full-width","action-bar"],["mat-flat-button","","type","button",1,"cancel-btn",3,"click"],["mat-flat-button","","color","primary",1,"save-btn"]],template:function(l,r){1&l&&(e.j41(0,"df-alert",0),e.bIt("alertClosed",function(){return r.showAlert=!1}),e.EFF(1),e.k0s(),e.j41(2,"div",1),e.nI1(3,"async"),e.nI1(4,"async"),e.j41(5,"form",2),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(6,"mat-form-field",3)(7,"mat-label"),e.EFF(8),e.nI1(9,"transloco"),e.k0s(),e.nrm(10,"input",4),e.nI1(11,"transloco"),e.DNE(12,F,3,3,"mat-error",5),e.k0s(),e.j41(13,"mat-form-field",3)(14,"mat-label"),e.EFF(15),e.nI1(16,"transloco"),e.k0s(),e.nrm(17,"input",6),e.nI1(18,"transloco"),e.k0s(),e.j41(19,"mat-form-field",7)(20,"mat-label"),e.EFF(21),e.nI1(22,"transloco"),e.k0s(),e.nrm(23,"input",8),e.k0s(),e.j41(24,"mat-form-field",7)(25,"mat-label"),e.EFF(26),e.nI1(27,"transloco"),e.k0s(),e.nrm(28,"input",9),e.k0s(),e.j41(29,"mat-form-field",7)(30,"mat-label"),e.EFF(31),e.nI1(32,"transloco"),e.k0s(),e.nrm(33,"input",10),e.k0s(),e.j41(34,"mat-form-field",11)(35,"mat-label"),e.EFF(36),e.nI1(37,"transloco"),e.k0s(),e.nrm(38,"input",12),e.nI1(39,"transloco"),e.k0s(),e.j41(40,"mat-form-field",11)(41,"mat-label"),e.EFF(42),e.nI1(43,"transloco"),e.k0s(),e.nrm(44,"input",13),e.nI1(45,"transloco"),e.k0s(),e.j41(46,"mat-form-field",11)(47,"mat-label"),e.EFF(48),e.nI1(49,"transloco"),e.k0s(),e.nrm(50,"textarea",14),e.k0s(),e.j41(51,"mat-form-field",3)(52,"mat-label"),e.EFF(53),e.nI1(54,"transloco"),e.k0s(),e.nrm(55,"input",15),e.nI1(56,"transloco"),e.k0s(),e.j41(57,"mat-form-field",3)(58,"mat-label"),e.EFF(59),e.nI1(60,"transloco"),e.k0s(),e.nrm(61,"input",16),e.nI1(62,"transloco"),e.k0s(),e.j41(63,"mat-form-field",3)(64,"mat-label"),e.EFF(65),e.nI1(66,"transloco"),e.k0s(),e.nrm(67,"input",17),e.nI1(68,"transloco"),e.k0s(),e.j41(69,"mat-form-field",3)(70,"mat-label"),e.EFF(71),e.nI1(72,"transloco"),e.k0s(),e.nrm(73,"input",18),e.nI1(74,"transloco"),e.k0s(),e.j41(75,"div",19)(76,"button",20),e.bIt("click",function(){return r.goBack()}),e.EFF(77),e.nI1(78,"transloco"),e.k0s(),e.j41(79,"button",21),e.DNE(80,A,3,3,"span",5),e.DNE(81,y,3,3,"span",5),e.k0s()()()()),2&l&&(e.Y8G("showAlert",r.showAlert)("alertType",r.alertType),e.R7$(1),e.SpI(" ",r.alertMsg,"\n"),e.R7$(1),e.HbH(e.bMT(3,32,r.isDarkMode)?"dark-theme":""),e.AVh("x-small",e.bMT(4,34,r.breakpointService.isXSmallScreen)),e.R7$(3),e.Y8G("formGroup",r.emailTemplateForm),e.R7$(3),e.JRh(e.bMT(9,36,"emailTemplates.templateName.label")),e.R7$(2),e.FS9("placeholder",e.bMT(11,38,"emailTemplates.templateName.placeholder")),e.R7$(2),e.Y8G("ngIf",r.emailTemplateForm.controls.name.hasError("required")),e.R7$(3),e.JRh(e.bMT(16,40,"emailTemplates.templateDescription.label")),e.R7$(2),e.FS9("placeholder",e.bMT(18,42,"emailTemplates.templateDescription.placeholder")),e.R7$(4),e.JRh(e.bMT(22,44,"emailTemplates.recipient.label")),e.R7$(5),e.JRh(e.bMT(27,46,"emailTemplates.cc.label")),e.R7$(5),e.JRh(e.bMT(32,48,"emailTemplates.bcc.label")),e.R7$(5),e.JRh(e.bMT(37,50,"emailTemplates.subject.label")),e.R7$(2),e.FS9("placeholder",e.bMT(39,52,"emailTemplates.subject.placeholder")),e.R7$(4),e.JRh(e.bMT(43,54,"emailTemplates.attachment.label")),e.R7$(2),e.FS9("placeholder",e.bMT(45,56,"emailTemplates.attachment.placeholder")),e.R7$(4),e.JRh(e.bMT(49,58,"emailTemplates.body")),e.R7$(5),e.JRh(e.bMT(54,60,"emailTemplates.senderName.label")),e.R7$(2),e.FS9("placeholder",e.bMT(56,62,"emailTemplates.senderName.placeholder")),e.R7$(4),e.JRh(e.bMT(60,64,"emailTemplates.senderEmail.label")),e.R7$(2),e.FS9("placeholder",e.bMT(62,66,"emailTemplates.senderEmail.placeholder")),e.R7$(4),e.JRh(e.bMT(66,68,"emailTemplates.replyToName.label")),e.R7$(2),e.FS9("placeholder",e.bMT(68,70,"emailTemplates.replyToName.placeholder")),e.R7$(4),e.JRh(e.bMT(72,72,"emailTemplates.replyToEmail.label")),e.R7$(2),e.FS9("placeholder",e.bMT(74,74,"emailTemplates.replyToEmail.placeholder")),e.R7$(4),e.SpI(" ",e.bMT(78,76,"cancel")," "),e.R7$(3),e.Y8G("ngIf",r.editApp),e.R7$(1),e.Y8G("ngIf",!r.editApp))},dependencies:[T.Hl,T.$z,o.X1,o.qT,o.me,o.BC,o.cb,o.YS,o.j4,o.JD,d.RG,d.rl,d.nJ,d.TL,m.fS,m.fg,E.bT,u.Ve,f.Sy,M.Kj,E.Jj,i.W],styles:[".email-template-details-container[_ngcontent-%COMP%]   .email-template-body[_ngcontent-%COMP%]{min-height:300px}.email-template-details-container.x-small[_ngcontent-%COMP%]   .email-template-body[_ngcontent-%COMP%]{min-height:200px}"]})}};C=(0,t.Cg)([(0,D.d)({checkProperties:!0})],C)},51425:(I,h,a)=>{a.d(h,{W:()=>M});var t=a(17705),o=a(60177),f=a(88834),u=a(20060),m=a(45383);function d(s,D){if(1&s){const i=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(i);const _=t.XpG(2);return t.Njj(_.dismissAlert())}),t.j41(1,"fa-icon",6),t.EFF(2),t.k0s()()}if(2&s){const i=t.XpG(2);t.R7$(1),t.Y8G("icon",i.faXmark),t.R7$(1),t.JRh("alerts.close")}}function T(s,D){if(1&s&&(t.j41(0,"div",1),t.nrm(1,"fa-icon",2),t.j41(2,"span",3),t.SdG(3),t.k0s(),t.DNE(4,d,3,2,"button",4),t.k0s()),2&s){const i=t.XpG();t.HbH(i.alertType),t.R7$(1),t.Y8G("icon",i.icon),t.R7$(3),t.Y8G("ngIf",i.dismissible)}}const E=["*"];let M=(()=>{class s{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new t.bkB,this.faXmark=m.Jyw}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return m.SGM;case"error":return m.rfe;case"warning":return m.tUE;default:return m.iW_}}static{this.\u0275fac=function(c){return new(c||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[t.aNF],ngContentSelectors:E,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(c,_){1&c&&(t.NAR(),t.DNE(0,T,5,4,"div",0)),2&c&&t.Y8G("ngIf",_.showAlert)},dependencies:[o.bT,f.Hl,f.iY,u.dX,u.aY],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]})}}return s})()}}]);