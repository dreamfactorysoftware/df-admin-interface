"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[4060],{24060:(b,g,r)=>{r.r(g),r.d(g,{DfForgotPasswordComponent:()=>I});var e=r(31635),i=r(89417),u=r(99437),d=r(18810),_=r(25558),D=r(51425),w=r(69465),h=r(23472),C=r(18498),m=r(88834),E=r(99631),c=r(32102),f=r(60177),p=r(71997),P=r(25596),R=r(33609),v=r(49894),t=r(17705),T=r(82298),y=r(79676),A=r(34387);function x(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"userManagement.controls.email.errors.invalid")," "))}function $(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"userManagement.controls.email.errors.required")," "))}function j(n,o){if(1&n&&(t.j41(0,"mat-form-field",10)(1,"mat-label"),t.EFF(2),t.nI1(3,"transloco"),t.k0s(),t.nrm(4,"input",11),t.DNE(5,x,3,3,"mat-error",12),t.DNE(6,$,3,3,"mat-error",12),t.k0s()),2&n){const s=t.XpG(2);let a,l;t.R7$(2),t.SpI(" ",t.bMT(3,3,"userManagement.controls.email.label"),""),t.R7$(3),t.Y8G("ngIf",(null==(a=s.forgetPasswordForm.get("email"))||null==a.errors?null:a.errors.email)&&!(null!=(a=s.forgetPasswordForm.get("email"))&&null!=a.errors&&a.errors.required)),t.R7$(1),t.Y8G("ngIf",!(null!=(l=s.forgetPasswordForm.get("email"))&&null!=l.errors&&l.errors.email)&&(null==(l=s.forgetPasswordForm.get("email"))||null==l.errors?null:l.errors.required))}}function G(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"userManagement.controls.username.errors.required")," "))}function S(n,o){if(1&n&&(t.j41(0,"mat-form-field",10)(1,"mat-label"),t.EFF(2),t.nI1(3,"transloco"),t.k0s(),t.nrm(4,"input",13),t.DNE(5,G,3,3,"mat-error",12),t.k0s()),2&n){const s=t.XpG(2);let a;t.R7$(2),t.JRh(t.bMT(3,2,"userManagement.controls.username.altLabel")),t.R7$(3),t.Y8G("ngIf",null==(a=s.forgetPasswordForm.get("username"))||null==a.errors?null:a.errors.required)}}function U(n,o){if(1&n){const s=t.RV6();t.j41(0,"form",7),t.bIt("ngSubmit",function(){t.eBV(s);const l=t.XpG();return t.Njj(l.requestReset())}),t.DNE(1,j,7,5,"mat-form-field",8),t.DNE(2,S,6,4,"mat-form-field",8),t.j41(3,"button",9),t.EFF(4),t.nI1(5,"transloco"),t.k0s()()}if(2&n){const s=t.XpG();t.Y8G("formGroup",s.forgetPasswordForm),t.R7$(1),t.Y8G("ngIf","email"===s.loginAttribute),t.R7$(1),t.Y8G("ngIf","username"===s.loginAttribute),t.R7$(2),t.SpI(" ",t.bMT(5,4,"userManagement.requestPasswordReset")," ")}}function k(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"userManagement.controls.securityAnswer.errors.required")," "))}function B(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"userManagement.controls.password.errors.required")," "))}function W(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"userManagement.controls.password.errors.length")," "))}function L(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"userManagement.controls.confirmPassword.errors.match")," "))}function N(n,o){if(1&n){const s=t.RV6();t.j41(0,"form",14),t.bIt("ngSubmit",function(){t.eBV(s);const l=t.XpG();return t.Njj(l.resetPassword())}),t.j41(1,"mat-form-field",10)(2,"mat-label"),t.EFF(3),t.nI1(4,"transloco"),t.k0s(),t.nrm(5,"input",15),t.k0s(),t.j41(6,"mat-form-field",10)(7,"mat-label"),t.EFF(8),t.nI1(9,"transloco"),t.k0s(),t.nrm(10,"input",16),t.DNE(11,k,3,3,"mat-error",12),t.k0s(),t.j41(12,"mat-form-field",10)(13,"mat-label"),t.EFF(14),t.nI1(15,"transloco"),t.k0s(),t.nrm(16,"input",17),t.DNE(17,B,3,3,"mat-error",12),t.DNE(18,W,3,3,"mat-error",12),t.k0s(),t.j41(19,"mat-form-field",10)(20,"mat-label"),t.EFF(21),t.nI1(22,"transloco"),t.k0s(),t.nrm(23,"input",18),t.DNE(24,L,3,3,"mat-error",12),t.k0s(),t.j41(25,"button",9),t.EFF(26),t.nI1(27,"transloco"),t.k0s()()}if(2&n){const s=t.XpG();let a,l,M,O;t.Y8G("formGroup",s.securityQuestionForm),t.R7$(3),t.SpI(" ",t.bMT(4,11,"userManagement.controls.securityQuestion.label"),""),t.R7$(2),t.Y8G("readonly",!0),t.R7$(3),t.SpI(" ",t.bMT(9,13,"userManagement.controls.securityAnswer.label"),""),t.R7$(3),t.Y8G("ngIf",null==(a=s.securityQuestionForm.get("answer"))||null==a.errors?null:a.errors.required),t.R7$(3),t.JRh(t.bMT(15,15,"userManagement.controls.password.label")),t.R7$(3),t.Y8G("ngIf",null==(l=s.securityQuestionForm.get("newPassword"))||null==l.errors?null:l.errors.required),t.R7$(1),t.Y8G("ngIf",null==(M=s.securityQuestionForm.get("newPassword"))||null==M.errors?null:M.errors.minlength),t.R7$(3),t.JRh(t.bMT(22,17,"userManagement.controls.confirmPassword.label")),t.R7$(3),t.Y8G("ngIf",null==(O=s.securityQuestionForm.get("confirmPassword"))?null:O.hasError("doesNotMatch")),t.R7$(2),t.SpI(" ",t.bMT(27,19,"userManagement.resetPassword")," ")}}let I=class F{constructor(o,s,a,l,M,O){this.fb=o,this.systemConfigDataService=s,this.passwordService=a,this.translateService=l,this.router=M,this.authService=O,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.loginAttribute="email",this.hasSecurityQuestion=!1,this.loginRoute=`/${h.b.AUTH}/${h.b.LOGIN}`,this.forgetPasswordForm=this.fb.group({username:[""],email:[""]}),this.securityQuestionForm=this.fb.group({securityQuestion:[""],securityAnswer:["",i.k0.required],newPassword:["",[i.k0.required,i.k0.minLength(16)]],confirmPassword:["",[i.k0.required,(0,w.e)("newPassword")]]})}ngOnInit(){this.systemConfigDataService.environment$.subscribe(o=>{this.loginAttribute=o.authentication.loginAttribute,"username"===this.loginAttribute?this.forgetPasswordForm.controls.username.setValidators([i.k0.required]):this.forgetPasswordForm.controls.email.setValidators([i.k0.required,i.k0.email])})}requestReset(){this.forgetPasswordForm.invalid||this.passwordService.requestPasswordReset("username"===this.loginAttribute?{username:this.forgetPasswordForm.controls.username.value}:{email:this.forgetPasswordForm.controls.email.value}).pipe((0,u.W)(o=>(this.alertMsg=o.error.error.message,this.showAlert=!0,(0,d.$)(()=>new Error(o))))).subscribe(o=>{this.showAlert=!1,"securityQuestion"in o?(this.hasSecurityQuestion=!0,this.securityQuestionForm.controls.securityQuestion.setValue(o.securityQuestion)):(this.alertMsg=this.translateService.translate("userManagement.alerts.resetEmailSent"),this.showAlert=!0,this.alertType="success")})}resetPassword(){this.securityQuestionForm.invalid||this.passwordService.requestPasswordReset({...this.forgetPasswordForm.value,...this.securityQuestionForm.value},!0).pipe((0,u.W)(o=>(this.alertMsg=o.error.error.message,this.showAlert=!0,(0,d.$)(()=>new Error(o)))),(0,_.n)(()=>{const o={password:this.securityQuestionForm.controls.newPassword.value};return"username"===this.loginAttribute?o.username=this.forgetPasswordForm.controls.username.value:o.email=this.forgetPasswordForm.controls.email.value,this.authService.login(o)})).subscribe(()=>{this.showAlert=!1,this.router.navigate(["/"])})}static{this.\u0275fac=function(s){return new(s||F)(t.rXU(i.ok),t.rXU(T.f),t.rXU(y.p),t.rXU(R.JO),t.rXU(C.Ix),t.rXU(A.g))}}static{this.\u0275cmp=t.VBU({type:F,selectors:[["df-forgot-password"]],standalone:!0,features:[t.aNF],decls:16,vars:12,consts:[[1,"user-management-card-container"],[1,"user-management-card"],[3,"showAlert","alertType","alertClosed"],["name","forget-password-form",3,"formGroup","ngSubmit",4,"ngIf"],["name","security-questions-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"action-links"],["mat-button","","target","_self",3,"routerLink"],["name","forget-password-form",3,"formGroup","ngSubmit"],["appearance","outline",4,"ngIf"],["mat-flat-button","","color","primary","type","submit"],["appearance","outline"],["matInput","","type","email","formControlName","email"],[4,"ngIf"],["matInput","","type","text","formControlName","username"],["name","security-questions-form",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","securityQuestion",3,"readonly"],["matInput","","type","text","formControlName","securityAnswer"],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","confirmPassword"]],template:function(s,a){1&s&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"df-alert",2),t.bIt("alertClosed",function(){return a.showAlert=!1}),t.EFF(3),t.k0s(),t.j41(4,"mat-card-header")(5,"mat-card-title"),t.EFF(6),t.nI1(7,"transloco"),t.k0s()(),t.nrm(8,"mat-divider"),t.j41(9,"mat-card-content"),t.DNE(10,U,6,6,"form",3),t.DNE(11,N,28,21,"form",4),t.j41(12,"div",5)(13,"a",6),t.EFF(14),t.nI1(15,"transloco"),t.k0s()()()()()),2&s&&(t.R7$(2),t.Y8G("showAlert",a.showAlert)("alertType",a.alertType),t.R7$(1),t.JRh(a.alertMsg),t.R7$(3),t.SpI(" ",t.bMT(7,8,"userManagement.passwordReset")," "),t.R7$(4),t.Y8G("ngIf",!a.hasSecurityQuestion),t.R7$(1),t.Y8G("ngIf",a.hasSecurityQuestion),t.R7$(2),t.Y8G("routerLink",a.loginRoute),t.R7$(1),t.JRh(t.bMT(15,10,"userManagement.login")))},dependencies:[P.Hu,P.RN,P.m2,P.MM,P.dh,D.W,p.w,p.q,f.bT,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,c.RG,c.rl,c.nJ,c.TL,E.fS,E.fg,m.Hl,m.It,m.$z,C.Wk,R.Kj],styles:[".user-management-card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]{padding:16px;margin:0 auto;min-width:300px;max-width:445px;box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape: 4px;--mdc-outlined-card-container-shape: 4px;--mdc-outlined-card-outline-width: 1px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .services-section[_ngcontent-%COMP%]{padding-top:32px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .services-section[_ngcontent-%COMP%]   .services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:16px;gap:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   .action-links[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.user-management-card-container[_ngcontent-%COMP%]{margin-top:20vh}.user-management-card-container.dark-theme[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff}"]})}};I=(0,e.Cg)([(0,v.d)({checkProperties:!0})],I)},51425:(b,g,r)=>{r.d(g,{W:()=>C});var e=r(17705),i=r(60177),u=r(88834),d=r(20060),_=r(45383);function D(m,E){if(1&m){const c=e.RV6();e.j41(0,"button",5),e.bIt("click",function(){e.eBV(c);const p=e.XpG(2);return e.Njj(p.dismissAlert())}),e.j41(1,"fa-icon",6),e.EFF(2),e.k0s()()}if(2&m){const c=e.XpG(2);e.R7$(1),e.Y8G("icon",c.faXmark),e.R7$(1),e.JRh("alerts.close")}}function w(m,E){if(1&m&&(e.j41(0,"div",1),e.nrm(1,"fa-icon",2),e.j41(2,"span",3),e.SdG(3),e.k0s(),e.DNE(4,D,3,2,"button",4),e.k0s()),2&m){const c=e.XpG();e.HbH(c.alertType),e.R7$(1),e.Y8G("icon",c.icon),e.R7$(3),e.Y8G("ngIf",c.dismissible)}}const h=["*"];let C=(()=>{class m{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new e.bkB,this.faXmark=_.Jyw}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return _.SGM;case"error":return _.rfe;case"warning":return _.tUE;default:return _.iW_}}static{this.\u0275fac=function(f){return new(f||m)}}static{this.\u0275cmp=e.VBU({type:m,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[e.aNF],ngContentSelectors:h,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(f,p){1&f&&(e.NAR(),e.DNE(0,w,5,4,"div",0)),2&f&&e.Y8G("ngIf",p.showAlert)},dependencies:[i.bT,u.Hl,u.iY,d.dX,d.aY],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]})}}return m})()},69465:(b,g,r)=>{function e(i){return u=>{const d=u.parent;if(d){const _=d.get(i);if(_&&u.value!==_.value)return{doesNotMatch:!0}}return null}}r.d(g,{e:()=>e})}}]);