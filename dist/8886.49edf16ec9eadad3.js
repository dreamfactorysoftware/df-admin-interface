"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[8886],{51425:(F,T,r)=>{r.d(T,{W:()=>R});var _=r(17705),c=r(60177),a=r(88834),p=r(20060),f=r(45383);function d(u,E){if(1&u){const M=_.RV6();_.j41(0,"button",5),_.bIt("click",function(){_.eBV(M);const t=_.XpG(2);return _.Njj(t.dismissAlert())}),_.j41(1,"fa-icon",6),_.EFF(2),_.k0s()()}if(2&u){const M=_.XpG(2);_.R7$(1),_.Y8G("icon",M.faXmark),_.R7$(1),_.JRh("alerts.close")}}function C(u,E){if(1&u&&(_.j41(0,"div",1),_.nrm(1,"fa-icon",2),_.j41(2,"span",3),_.SdG(3),_.k0s(),_.DNE(4,d,3,2,"button",4),_.k0s()),2&u){const M=_.XpG();_.HbH(M.alertType),_.R7$(1),_.Y8G("icon",M.icon),_.R7$(3),_.Y8G("ngIf",M.dismissible)}}const o=["*"];let R=(()=>{class u{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new _.bkB,this.faXmark=f.Jyw}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return f.SGM;case"error":return f.rfe;case"warning":return f.tUE;default:return f.iW_}}static{this.\u0275fac=function(e){return new(e||u)}}static{this.\u0275cmp=_.VBU({type:u,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[_.aNF],ngContentSelectors:o,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(e,t){1&e&&(_.NAR(),_.DNE(0,C,5,4,"div",0)),2&e&&_.Y8G("ngIf",t.showAlert)},dependencies:[c.bT,a.Hl,a.iY,p.dX,p.aY],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]})}}return u})()},58751:(F,T,r)=>{r.d(T,{S:()=>b});var _=r(31635),c=r(60177),a=r(89417),p=r(32102),f=r(88834),d=r(9159),C=r(99631),o=r(30450),R=r(20060),u=r(9454),E=r(45383),M=r(33609),e=r(49894),t=r(17705),k=r(52868);function G(n,i){if(1&n&&(t.j41(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t.EFF(4),t.nI1(5,"transloco"),t.k0s(),t.j41(6,"mat-panel-description"),t.EFF(7),t.nI1(8,"transloco"),t.k0s()(),t.eu8(9,3),t.k0s()()),2&n){t.XpG();const l=t.sdS(4);t.R7$(4),t.SpI(" ",t.bMT(5,3,"lookupKeys.label"),""),t.R7$(3),t.JRh(t.bMT(8,5,"lookupKeys.desc")),t.R7$(2),t.Y8G("ngTemplateOutlet",l)}}function y(n,i){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"name")," "))}function U(n,i){1&n&&(t.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),t.EFF(3),t.nI1(4,"transloco"),t.k0s(),t.nrm(5,"input",18),t.k0s()()),2&n&&(t.Y8G("formGroupName",i.index),t.R7$(3),t.JRh(t.bMT(4,2,"name")))}function s(n,i){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"value")," "))}function m(n,i){1&n&&(t.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),t.EFF(3),t.nI1(4,"transloco"),t.k0s(),t.nrm(5,"input",19),t.k0s()()),2&n&&(t.Y8G("formGroupName",i.index),t.R7$(3),t.JRh(t.bMT(4,2,"value")))}function P(n,i){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"private")," "))}function g(n,i){1&n&&(t.j41(0,"mat-cell",16),t.nrm(1,"mat-slide-toggle",20),t.nI1(2,"transloco"),t.k0s()),2&n&&(t.Y8G("formGroupName",i.index),t.R7$(1),t.BMQ("aria-label",t.bMT(2,2,"name")))}function D(n,i){if(1&n){const l=t.RV6();t.j41(0,"mat-header-cell")(1,"button",21),t.bIt("click",function(){t.eBV(l);const O=t.XpG(2);return t.Njj(O.add())}),t.nI1(2,"transloco"),t.nrm(3,"fa-icon",22),t.k0s()()}if(2&n){const l=t.XpG(2);t.R7$(1),t.BMQ("aria-label",t.bMT(2,2,"newEntry")),t.R7$(2),t.Y8G("icon",l.faPlus)}}function v(n,i){if(1&n){const l=t.RV6();t.j41(0,"mat-cell",16)(1,"button",23),t.bIt("click",function(){const B=t.eBV(l).index,L=t.XpG(2);return t.Njj(L.remove(B))}),t.nrm(2,"fa-icon",24),t.k0s()()}if(2&n){const l=i.index,h=t.XpG(2);t.Y8G("formGroupName",l),t.R7$(2),t.Y8G("icon",h.faTrashCan)}}function I(n,i){1&n&&t.nrm(0,"mat-header-row")}function A(n,i){1&n&&t.nrm(0,"mat-row")}function K(n,i){1&n&&(t.j41(0,"tr",25)(1,"td",26),t.EFF(2),t.nI1(3,"transloco"),t.k0s()()),2&n&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lookupKeys.noKeys")," "))}function N(n,i){if(1&n&&(t.qex(0,4)(1,5),t.j41(2,"mat-table",6),t.qex(3,7),t.DNE(4,y,3,3,"mat-header-cell",8),t.DNE(5,U,6,4,"mat-cell",9),t.bVm(),t.qex(6,10),t.DNE(7,s,3,3,"mat-header-cell",8),t.DNE(8,m,6,4,"mat-cell",9),t.bVm(),t.qex(9,11),t.DNE(10,P,3,3,"mat-header-cell",8),t.DNE(11,g,3,4,"mat-cell",9),t.bVm(),t.qex(12,12),t.DNE(13,D,4,4,"mat-header-cell",8),t.DNE(14,v,3,2,"mat-cell",9),t.bVm(),t.DNE(15,I,1,0,"mat-header-row",13),t.DNE(16,A,1,0,"mat-row",14),t.DNE(17,K,4,3,"tr",15),t.k0s(),t.bVm()()),2&n){const l=t.XpG();t.Y8G("formGroup",l.rootForm),t.R7$(2),t.Y8G("dataSource",l.dataSource),t.R7$(13),t.Y8G("matHeaderRowDef",l.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",l.displayedColumns)}}let b=class S{constructor(i,l){this.rootFormGroup=i,this.themeService=l,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=E.sjs,this.faPlus=E.QLR,this.showAccordion=!0,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(i=>{i.get("id")?.value&&i.get("name")?.disable()}),this.dataSource=new d.I6(this.lookupKeys.controls)}add(){this.lookupKeys.push(new a.gE({name:new a.MJ("",a.k0.required),value:new a.MJ(""),private:new a.MJ(!1)})),this.updateDataSource()}remove(i){this.lookupKeys.removeAt(i),this.updateDataSource()}static{this.\u0275fac=function(l){return new(l||S)(t.rXU(a.j4),t.rXU(k.n))}}static{this.\u0275cmp=t.VBU({type:S,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},standalone:!0,features:[t.aNF],decls:5,vars:6,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["color","primary","formControlName","private"],["mat-mini-fab","","type","button",1,"save-btn",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",1,"remove-btn",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(l,h){if(1&l&&(t.j41(0,"div",0),t.nI1(1,"async"),t.DNE(2,G,10,7,"mat-accordion",1),t.DNE(3,N,18,4,"ng-template",null,2,t.C5r),t.k0s()),2&l){const O=t.sdS(4);t.HbH(t.bMT(1,4,h.isDarkMode)?"dark-theme":""),t.R7$(2),t.Y8G("ngIf",h.showAccordion)("ngIfElse",O)}},dependencies:[a.YN,a.me,a.BC,a.cb,a.X1,a.j4,a.JD,a.$R,a.v8,c.bT,c.T3,p.RG,p.rl,p.nJ,f.Hl,f.iY,f.$0,d.tP,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,d.ky,C.fS,C.fg,o.mV,o.sG,R.dX,R.aY,u.MY,u.BS,u.GK,u.Z2,u.WN,u.Q6,M.Kj,c.Jj],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]})}};b=(0,_.Cg)([(0,e.d)({checkProperties:!0})],b)},77493:(F,T,r)=>{r.d(T,{D:()=>U});var _=r(31635),c=r(60177),a=r(89417),p=r(32102),f=r(99631),d=r(33609),C=r(49894),o=r(17705),R=r(52868);function u(s,m){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.username.errors.required")," "))}function E(s,m){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.username.errors.minLength")," "))}function M(s,m){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.email.errors.invalid")," "))}function e(s,m){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.email.errors.required")," "))}function t(s,m){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.firstName.errors.required")," "))}function k(s,m){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.lastName.errors.required")," "))}function G(s,m){1&s&&(o.j41(0,"mat-error"),o.EFF(1),o.nI1(2,"transloco"),o.k0s()),2&s&&(o.R7$(1),o.SpI(" ",o.bMT(2,1,"userManagement.controls.displayName.errors.required")," "))}function y(s,m){1&s&&(o.j41(0,"mat-form-field",2)(1,"mat-label"),o.EFF(2),o.nI1(3,"transloco"),o.k0s(),o.nrm(4,"input",10),o.k0s()),2&s&&(o.R7$(2),o.JRh(o.bMT(3,1,"userManagement.controls.phone.label")))}let U=class x{constructor(m,P){this.rootFormGroup=m,this.themeService=P,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()})}controlExists(m){return null!==this.rootForm.get(m)}isRequired(m){return!!this.rootForm.get(m)?.hasValidator(a.k0.required)}static{this.\u0275fac=function(P){return new(P||x)(o.rXU(a.j4),o.rXU(R.n))}}static{this.\u0275cmp=o.VBU({type:x,selectors:[["df-profile-details"]],standalone:!0,features:[o.aNF],decls:37,vars:31,consts:[["name","user-details-section",3,"formGroup"],["formGroupName","profileDetailsGroup"],["appearance","outline"],["matInput","","type","text","formControlName","username"],[4,"ngIf"],["matInput","","type","email","formControlName","email"],["matInput","","type","text","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","name"],["appearance","outline",4,"ngIf"],["matInput","","formControlName","phone"]],template:function(P,g){if(1&P&&(o.qex(0,0),o.nI1(1,"async"),o.qex(2,1),o.j41(3,"mat-form-field",2)(4,"mat-label"),o.EFF(5),o.nI1(6,"transloco"),o.nI1(7,"transloco"),o.k0s(),o.nrm(8,"input",3),o.DNE(9,u,3,3,"mat-error",4),o.DNE(10,E,3,3,"mat-error",4),o.k0s(),o.j41(11,"mat-form-field",2)(12,"mat-label"),o.EFF(13),o.nI1(14,"transloco"),o.k0s(),o.nrm(15,"input",5),o.DNE(16,M,3,3,"mat-error",4),o.DNE(17,e,3,3,"mat-error",4),o.k0s(),o.j41(18,"mat-form-field",2)(19,"mat-label"),o.EFF(20),o.nI1(21,"transloco"),o.k0s(),o.nrm(22,"input",6),o.DNE(23,t,3,3,"mat-error",4),o.k0s(),o.j41(24,"mat-form-field",2)(25,"mat-label"),o.EFF(26),o.nI1(27,"transloco"),o.k0s(),o.nrm(28,"input",7),o.DNE(29,k,3,3,"mat-error",4),o.k0s(),o.j41(30,"mat-form-field",2)(31,"mat-label"),o.EFF(32),o.nI1(33,"transloco"),o.k0s(),o.nrm(34,"input",8),o.DNE(35,G,3,3,"mat-error",4),o.k0s(),o.DNE(36,y,5,3,"mat-form-field",9),o.bVm()()),2&P){let D,v,I,A,K,N,b;o.HbH(o.bMT(1,17,g.isDarkMode)?"dark-theme":""),o.Y8G("formGroup",g.rootForm),o.R7$(5),o.Lme("",o.bMT(6,19,"userManagement.controls.username.altLabel"),"",g.isRequired("profileDetailsGroup.username")?"":" "+o.bMT(7,21,"userManagement.controls.username.optional"),""),o.R7$(4),o.Y8G("ngIf",null==(D=g.rootForm.get("profileDetailsGroup.username"))||null==D.errors?null:D.errors.required),o.R7$(1),o.Y8G("ngIf",null==(v=g.rootForm.get("profileDetailsGroup.username"))||null==v.errors?null:v.errors.minlength),o.R7$(3),o.SpI(" ",o.bMT(14,23,"userManagement.controls.email.label"),""),o.R7$(3),o.Y8G("ngIf",(null==(I=g.rootForm.get("profileDetailsGroup.email"))||null==I.errors?null:I.errors.email)&&!(null!=(I=g.rootForm.get("profileDetailsGroup.email"))&&null!=I.errors&&I.errors.required)),o.R7$(1),o.Y8G("ngIf",!(null!=(A=g.rootForm.get("profileDetailsGroup.email"))&&null!=A.errors&&A.errors.email)&&(null==(A=g.rootForm.get("profileDetailsGroup.email"))||null==A.errors?null:A.errors.required)),o.R7$(3),o.SpI(" ",o.bMT(21,25,"userManagement.controls.firstName.label"),""),o.R7$(3),o.Y8G("ngIf",null==(K=g.rootForm.get("profileDetailsGroup.firstName"))||null==K.errors?null:K.errors.required),o.R7$(3),o.JRh(o.bMT(27,27,"userManagement.controls.lastName.label")),o.R7$(3),o.Y8G("ngIf",null==(N=g.rootForm.get("profileDetailsGroup.lastName"))||null==N.errors?null:N.errors.required),o.R7$(3),o.JRh(o.bMT(33,29,"userManagement.controls.displayName.label")),o.R7$(3),o.Y8G("ngIf",null==(b=g.rootForm.get("profileDetailsGroup.name"))||null==b.errors?null:b.errors.required),o.R7$(1),o.Y8G("ngIf",g.controlExists("profileDetailsGroup.phone"))}},dependencies:[p.RG,p.rl,p.nJ,p.TL,f.fS,f.fg,a.YN,a.me,a.BC,a.cb,a.X1,a.j4,a.JD,a.$R,d.Kj,c.bT,c.Jj],encapsulation:2})}};U=(0,_.Cg)([(0,C.d)({checkProperties:!0})],U)},30877:(F,T,r)=>{r.d(T,{N:()=>b});var _=r(31635),c=r(89417),a=r(88834),p=r(9159),f=r(99631),d=r(20060),C=r(9454),o=r(60850),R=r(45383),u=r(33609),E=r(60177),M=r(49894),e=r(17705),t=r(86600),k=r(32102);function G(n,i){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"roles.app")," "))}function y(n,i){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const l=i.$implicit;e.Y8G("value",l.name),e.R7$(1),e.SpI(" ",l.name," ")}}function U(n,i){if(1&n&&(e.j41(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",14),e.j41(6,"mat-autocomplete",15,16),e.DNE(8,y,2,2,"mat-option",17),e.k0s()()()),2&n){const l=i.index,h=e.sdS(7),O=e.XpG();e.Y8G("formGroupName",l),e.R7$(3),e.JRh(e.bMT(4,4,"roles.app")),e.R7$(2),e.Y8G("matAutocomplete",h),e.R7$(3),e.Y8G("ngForOf",O.availableApps)}}function s(n,i){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"roles.role")," "))}function m(n,i){if(1&n&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&n){const l=i.$implicit;e.Y8G("value",l.name),e.R7$(1),e.SpI(" ",l.name," ")}}function P(n,i){if(1&n&&(e.j41(0,"mat-cell",12)(1,"mat-form-field",13)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",19),e.j41(6,"mat-autocomplete",15,16),e.DNE(8,m,2,2,"mat-option",17),e.k0s()()()),2&n){const l=i.index,h=e.sdS(7),O=e.XpG();e.Y8G("formGroupName",l),e.R7$(3),e.JRh(e.bMT(4,4,"roles.role")),e.R7$(2),e.Y8G("matAutocomplete",h),e.R7$(3),e.Y8G("ngForOf",O.roles)}}function g(n,i){if(1&n){const l=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(l);const O=e.XpG(2);return e.Njj(O.add())}),e.nI1(1,"transloco"),e.nrm(2,"fa-icon",22),e.k0s()}if(2&n){const l=e.XpG(2);e.BMQ("aria-label",e.bMT(1,2,"newEntry")),e.R7$(2),e.Y8G("icon",l.faPlus)}}function D(n,i){if(1&n&&(e.j41(0,"mat-header-cell"),e.DNE(1,g,3,4,"button",20),e.k0s()),2&n){const l=e.XpG();e.R7$(1),e.Y8G("ngIf",l.showAddButton)}}function v(n,i){if(1&n){const l=e.RV6();e.j41(0,"mat-cell",12)(1,"button",23),e.bIt("click",function(){const B=e.eBV(l).index,L=e.XpG();return e.Njj(L.remove(B))}),e.nrm(2,"fa-icon",24),e.k0s()()}if(2&n){const l=i.index,h=e.XpG();e.Y8G("formGroupName",l),e.R7$(2),e.Y8G("icon",h.faTrashCan)}}function I(n,i){1&n&&e.nrm(0,"mat-header-row")}function A(n,i){1&n&&e.nrm(0,"mat-row")}function K(n,i){1&n&&(e.j41(0,"tr",25)(1,"td",26),e.EFF(2),e.nI1(3,"transloco"),e.k0s()()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"roles.noRoles")," "))}const N=function(n,i){return{assigned:n,total:i}};let b=class ${constructor(i){this.rootFormGroup=i,this.apps=[],this.roles=[],this.displayedColumns=["app","role","actions"],this.faTrashCan=R.sjs,this.faPlus=R.QLR}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.rootForm.markAllAsTouched()}),this.appRoles=this.rootForm.get("appRoles"),this.updateDataSource()}updateDataSource(){this.dataSource=new p.I6(this.appRoles.controls)}get availableApps(){return this.apps.filter(i=>!this.appRoles.value.find(l=>l.app===i.name))}get showAddButton(){return this.appRoles.length<this.apps.length}get assignedApps(){return this.apps.length-this.appRoles.length}add(){this.appRoles.push(new c.gE({app:new c.MJ("",c.k0.required),role:new c.MJ("",c.k0.required)})),this.updateDataSource()}remove(i){this.appRoles.removeAt(i),this.updateDataSource()}static{this.\u0275fac=function(l){return new(l||$)(e.rXU(c.j4))}}static{this.\u0275cmp=e.VBU({type:$,selectors:[["df-user-app-roles"]],inputs:{apps:"apps",roles:"roles"},standalone:!0,features:[e.aNF],decls:25,vars:14,consts:[[1,"app-roles-keys-accordion"],[3,"formGroup"],["formArrayName","appRoles"],[3,"dataSource"],["matColumnDef","app"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"formGroupName"],["subscriptSizing","dynamic"],["matInput","","formControlName","app",3,"matAutocomplete"],["requireSelection",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","role",3,"matAutocomplete"],["mat-mini-fab","","color","primary","type","button",3,"click",4,"ngIf"],["mat-mini-fab","","color","primary","type","button",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",3,"click"],["size","xs",3,"icon"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(l,h){1&l&&(e.j41(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel")(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e.EFF(5),e.nI1(6,"transloco"),e.k0s(),e.j41(7,"mat-panel-description"),e.EFF(8),e.nI1(9,"transloco"),e.k0s()(),e.qex(10,1)(11,2),e.j41(12,"mat-table",3),e.qex(13,4),e.DNE(14,G,3,3,"mat-header-cell",5),e.DNE(15,U,9,6,"mat-cell",6),e.bVm(),e.qex(16,7),e.DNE(17,s,3,3,"mat-header-cell",5),e.DNE(18,P,9,6,"mat-cell",6),e.bVm(),e.qex(19,8),e.DNE(20,D,2,1,"mat-header-cell",5),e.DNE(21,v,3,2,"mat-cell",6),e.bVm(),e.DNE(22,I,1,0,"mat-header-row",9),e.DNE(23,A,1,0,"mat-row",10),e.DNE(24,K,4,3,"tr",11),e.k0s(),e.bVm()(),e.k0s()()()),2&l&&(e.R7$(5),e.SpI(" ",e.bMT(6,6,"roles.label"),""),e.R7$(3),e.JRh(e.i5U(9,8,"roles.appRoleAssigned",e.l_i(11,N,h.apps.length-h.availableApps.length,h.apps.length))),e.R7$(2),e.Y8G("formGroup",h.rootForm),e.R7$(2),e.Y8G("dataSource",h.dataSource),e.R7$(10),e.Y8G("matHeaderRowDef",h.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",h.displayedColumns))},dependencies:[c.YN,c.me,c.BC,c.cb,c.X1,c.j4,c.JD,c.$R,c.v8,o.jL,o.$3,t.wT,o.pN,a.Hl,a.iY,a.$0,p.tP,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,p.ky,f.fS,f.fg,k.rl,k.nJ,d.dX,d.aY,C.MY,C.BS,C.GK,C.Z2,C.WN,C.Q6,u.Kj,E.bT,E.pM],styles:[".app-roles-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%]{max-width:10%}"]})}};b=(0,_.Cg)([(0,M.d)({checkProperties:!0})],b)},76765:(F,T,r)=>{r.d(T,{s:()=>y});var _=r(31635),c=r(17705),a=r(89417),p=r(69465),f=r(23472),d=r(80345),C=r(45383),o=r(49894),R=r(25558),u=r(7673),E=r(52868),M=r(44984),e=r(18498),t=r(82298),k=r(52608),G=r(95351);let y=class j{constructor(s,m,P,g,D){this.fb=s,this.activatedRoute=m,this.systemConfigDataService=P,this.breakpointService=g,this.paywallService=D,this.loginAttribute="email",this.faEnvelope=C.y_8,this.type="create",this.isSmallScreen=this.breakpointService.isSmallScreen,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.accessByTabs=[{control:"apps"},{control:"users"},{control:"services"},{control:"apidocs",label:"api-docs"},{control:"schema/data",label:"schema"},{control:"files"},{control:"scripts"},{control:"config"},{control:"packages",label:"package-manager"},{control:"limits"},{control:"scheduler"}],this.themeService=(0,c.WQX)(E.n),this.snackbarService=(0,c.WQX)(M.L),this.isDarkMode=this.themeService.darkMode$,this.userForm=this.fb.group({profileDetailsGroup:this.fb.group({username:["",a.k0.minLength(6)],email:["",a.k0.email],firstName:[""],lastName:[""],name:["",a.k0.required],phone:[""]}),isActive:[!0],tabs:this.buildTabs(),lookupKeys:this.fb.array([],[d.D]),appRoles:this.fb.array([])})}get cancelRoute(){let s=`/${f.b.ADMIN_SETTINGS}/`;return"admins"===this.userType&&(s+=f.b.ADMINS),"users"===this.userType&&(s+=f.b.USERS),s}ngOnInit(){this.paywallService.activatePaywall("limit").pipe((0,R.n)(s=>s?this.paywallService.activatePaywall("service_report"):(0,u.of)(!1))).subscribe(s=>{s&&(this.accessByTabs=[])}),this.activatedRoute.data.subscribe(({type:s,data:m,apps:P,roles:g})=>{m&&this.snackbarService.setSnackbarLastEle(m.name,!0),this.type=s,"users"===this.userType&&(this.apps=P.resource,this.roles=g.resource),"edit"===s?(this.currentProfile=m,this.userForm.patchValue({profileDetailsGroup:{username:m.username,email:m.email,firstName:m.firstName,lastName:m.lastName,name:m.name,phone:m.phone},isActive:m.isActive}),this.userForm.addControl("setPassword",new a.MJ(!1)),this.userForm.controls.setPassword.valueChanges.subscribe(D=>{D?this.addPasswordControls():this.removePasswordControls()}),"admins"===this.userType&&(m.isRootAdmin&&this.userForm.removeControl("tabs"),m.userToAppToRoleByUserId.length>0&&(this.changeAllTabs(!1),m.role.accessibleTabs.forEach(D=>{const v=this.tabs.controls.find(I=>I.value.name===D);v&&v.patchValue({checked:!0})}))),"users"===this.userType&&m.userToAppToRoleByUserId.length>0&&m.userToAppToRoleByUserId.forEach(D=>{this.userForm.controls.appRoles.push(new a.gE({app:new a.MJ(this.apps.find(v=>v.id===D.appId)?.name,[a.k0.required]),role:new a.MJ(this.roles.find(v=>v.id===D.roleId)?.name,[a.k0.required])}))}),m.lookupByUserId.length>0&&m.lookupByUserId.forEach(D=>{this.userForm.controls.lookupKeys.push(new a.gE({name:new a.MJ(D.name,[a.k0.required]),value:new a.MJ(D.value),private:new a.MJ(D.private),id:new a.MJ(D.id)}))})):(this.currentProfile={id:0},this.userForm.addControl("pass-invite",new a.MJ("",[a.k0.required])),this.userForm.controls["pass-invite"].valueChanges.subscribe(D=>{"password"===D?this.addPasswordControls():this.removePasswordControls()}))}),this.systemConfigDataService.environment$.subscribe(s=>{this.loginAttribute=s.authentication.loginAttribute,"username"===this.loginAttribute?this.userForm.get("profileDetailsGroup.username")?.addValidators([a.k0.required]):this.userForm.get("profileDetailsGroup.email")?.addValidators([a.k0.required])})}addPasswordControls(){this.userForm.addControl("password",new a.MJ("",[a.k0.required,a.k0.minLength(16)])),this.userForm.addControl("confirmPassword",new a.MJ("",[a.k0.required,(0,p.e)("password")]))}removePasswordControls(){this.userForm.removeControl("password"),this.userForm.removeControl("confirmPassword")}get tabs(){return this.userForm.controls.tabs}selectAllTabs(s){this.changeAllTabs(s.checked)}changeAllTabs(s){this.tabs.controls.forEach(m=>{m.patchValue({checked:s})})}get allTabsSelected(){return this.tabs.controls.every(s=>s.value.checked)}buildTabs(){const s=this.accessByTabs.map(m=>this.fb.group({name:m.control,title:m.label||m.control,checked:!0}));return this.fb.array(s)}triggerAlert(s,m){this.alertType=s,this.alertMsg=m,this.showAlert=!0}static{this.\u0275fac=function(m){return new(m||j)(c.rXU(a.ok),c.rXU(e.nX),c.rXU(t.f),c.rXU(k.R),c.rXU(G.o))}}static{this.\u0275cmp=c.VBU({type:j,selectors:[["df-user-details"]],decls:0,vars:0,template:function(m,P){},encapsulation:2})}};y=(0,_.Cg)([(0,o.d)({checkProperties:!0})],y)},53012:(F,T,r)=>{r.d(T,{u:()=>c});const _=[{regex:/Duplicate entry '([^']+)' for key 'user_email_unique'/,message:"alerts.duplicateEmail"}];function c(a){if(!a)return"alert.genericError";const p=_.find(f=>f.regex.test(a));return p?p.message:a}},69465:(F,T,r)=>{function _(c){return a=>{const p=a.parent;if(p){const f=p.get(c);if(f&&a.value!==f.value)return{doesNotMatch:!0}}return null}}r.d(T,{e:()=>_})},80345:(F,T,r)=>{r.d(T,{D:()=>c});var _=r(89417);const c=a=>{const p=new Map,f=a;function d(o){f.at(o).get("name")?.setErrors({notUnique:!0})}return f.controls.forEach((o,R)=>{if(!(o instanceof _.gE))return;const u=o.get("name");if(!u)return;const E=u.value;E&&(p.has(E)?(d(p.get(E)??0),d(R)):(p.set(E,R),function C(o){const u=f.at(o).get("name"),E=u?.errors;E&&(delete E.notUnique,u.setErrors(Object.keys(E).length?E:null))}(R)))}),null}}}]);