"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[6580],{76580:(A,h,a)=>{a.r(h),a.d(h,{DfGlobalLookupKeysComponent:()=>y});var f,g=a(97582),_=a(56223),o=a(84870),s=a(42281),D=a(42346),E=a(32296),c=a(86806),i=a(78791),t=a(65879),p=a(81896);a(6625);let y=((f=class{constructor(m,r,K){this.crudService=m,this.fb=r,this.activatedRoute=K,this.lookupKeysForm=this.fb.group({lookupKeys:this.fb.array([],[s.E])})}ngOnInit(){this.activatedRoute.data.subscribe(({data:m})=>{m.resource.length>0&&m.resource.forEach(r=>{this.lookupKeysForm.controls.lookupKeys.push(new _.cw({name:new _.NI(r.name,[_.kI.required]),value:new _.NI(r.value),private:new _.NI(r.private),id:new _.NI(r.id)}))})})}save(){if(this.lookupKeysForm.invalid||this.lookupKeysForm.pristine)return;const m=[],r=[];this.lookupKeysForm.get("lookupKeys").controls.forEach(d=>{d.pristine||(d.value.id?r.push(d.value):m.push({...d.value,id:null}))}),m.length>0&&this.crudService.create({resource:m},{fields:"*",snackbarSuccess:"lookupKeys.alerts.createSuccess"}).subscribe(),r.length>0&&r.forEach(d=>{d.id&&this.crudService.update(d.id,d,{snackbarSuccess:"lookupKeys.alerts.updateSuccess"}).subscribe()})}}).\u0275fac=function(m){return new(m||f)(t.Y36(c.sC),t.Y36(_.qu),t.Y36(p.gz))},f.\u0275cmp=t.Xpm({type:f,selectors:[["df-global-lookup-keys"]],standalone:!0,features:[t.jDz],decls:8,vars:8,consts:[[3,"formGroup","ngSubmit"],["formArrayName","lookupKeys",3,"showAccordion"],["mat-flat-button","","type","submit",1,"save-btn"]],template:function(m,r){1&m&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"transloco"),t.qZA(),t.TgZ(3,"form",0),t.NdJ("ngSubmit",function(){return r.save()}),t._UZ(4,"df-lookup-keys",1),t.TgZ(5,"button",2),t._uU(6),t.ALo(7,"transloco"),t.qZA()()),2&m&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"lookupKeys.fullDesc")),t.xp6(2),t.Q6J("formGroup",r.lookupKeysForm),t.xp6(1),t.Q6J("showAccordion",!1),t.xp6(2),t.hij(" ",t.lcZ(7,6,"save")," "))},dependencies:[o.a,_.UX,_._Y,_.JL,_.sg,_.CE,D.Ot,E.ot,E.lW]}),f);y=(0,g.gn)([(0,i.c)({checkProperties:!0})],y)},84870:(A,h,a)=>{a.d(h,{a:()=>k});var r,g=a(97582),_=a(96814),o=a(65879),s=a(56223),D=a(64170),E=a(32296),c=a(25313),i=a(2032),t=a(82599),p=a(45597),u=a(3305),f=a(90590),y=a(42346),v=a(78791),m=a(65763);function K(e,n){if(1&e&&(o.TgZ(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),o._uU(4),o.ALo(5,"transloco"),o.qZA(),o.TgZ(6,"mat-panel-description"),o._uU(7),o.ALo(8,"transloco"),o.qZA()(),o.GkF(9,3),o.qZA()()),2&e){o.oxw();const l=o.MAs(4);o.xp6(4),o.hij(" ",o.lcZ(5,3,"lookupKeys.label"),""),o.xp6(3),o.Oqu(o.lcZ(8,5,"lookupKeys.desc")),o.xp6(2),o.Q6J("ngTemplateOutlet",l)}}function d(e,n){1&e&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"name")," "))}function T(e,n){1&e&&(o.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),o._uU(3),o.ALo(4,"transloco"),o.qZA(),o._UZ(5,"input",18),o.qZA()()),2&e&&(o.Q6J("formGroupName",n.index),o.xp6(3),o.Oqu(o.lcZ(4,2,"name")))}function L(e,n){1&e&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"value")," "))}function M(e,n){1&e&&(o.TgZ(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),o._uU(3),o.ALo(4,"transloco"),o.qZA(),o._UZ(5,"input",19),o.qZA()()),2&e&&(o.Q6J("formGroupName",n.index),o.xp6(3),o.Oqu(o.lcZ(4,2,"value")))}function P(e,n){1&e&&(o.TgZ(0,"mat-header-cell"),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"private")," "))}function x(e,n){1&e&&(o.TgZ(0,"mat-cell",16),o._UZ(1,"mat-slide-toggle",20),o.ALo(2,"transloco"),o.qZA()),2&e&&(o.Q6J("formGroupName",n.index),o.xp6(1),o.uIk("aria-label",o.lcZ(2,2,"name")))}function Z(e,n){if(1&e){const l=o.EpF();o.TgZ(0,"mat-header-cell")(1,"button",21),o.NdJ("click",function(){o.CHM(l);const O=o.oxw(2);return o.KtG(O.add())}),o.ALo(2,"transloco"),o._UZ(3,"fa-icon",22),o.qZA()()}if(2&e){const l=o.oxw(2);o.xp6(1),o.uIk("aria-label",o.lcZ(2,2,"newEntry")),o.xp6(2),o.Q6J("icon",l.faPlus)}}function U(e,n){if(1&e){const l=o.EpF();o.TgZ(0,"mat-cell",16)(1,"button",23),o.NdJ("click",function(){const b=o.CHM(l).index,W=o.oxw(2);return o.KtG(W.remove(b))}),o._UZ(2,"fa-icon",24),o.qZA()()}if(2&e){const l=n.index,C=o.oxw(2);o.Q6J("formGroupName",l),o.xp6(2),o.Q6J("icon",C.faTrashCan)}}function I(e,n){1&e&&o._UZ(0,"mat-header-row")}function N(e,n){1&e&&o._UZ(0,"mat-row")}function R(e,n){1&e&&(o.TgZ(0,"tr",25)(1,"td",26),o._uU(2),o.ALo(3,"transloco"),o.qZA()()),2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"lookupKeys.noKeys")," "))}function B(e,n){if(1&e&&(o.ynx(0,4)(1,5),o.TgZ(2,"mat-table",6),o.ynx(3,7),o.YNc(4,d,3,3,"mat-header-cell",8),o.YNc(5,T,6,4,"mat-cell",9),o.BQk(),o.ynx(6,10),o.YNc(7,L,3,3,"mat-header-cell",8),o.YNc(8,M,6,4,"mat-cell",9),o.BQk(),o.ynx(9,11),o.YNc(10,P,3,3,"mat-header-cell",8),o.YNc(11,x,3,4,"mat-cell",9),o.BQk(),o.ynx(12,12),o.YNc(13,Z,4,4,"mat-header-cell",8),o.YNc(14,U,3,2,"mat-cell",9),o.BQk(),o.YNc(15,I,1,0,"mat-header-row",13),o.YNc(16,N,1,0,"mat-row",14),o.YNc(17,R,4,3,"tr",15),o.qZA(),o.BQk()()),2&e){const l=o.oxw();o.Q6J("formGroup",l.rootForm),o.xp6(2),o.Q6J("dataSource",l.dataSource),o.xp6(13),o.Q6J("matHeaderRowDef",l.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",l.displayedColumns)}}let k=((r=class{constructor(n,l){this.rootFormGroup=n,this.themeService=l,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=f.Vui,this.faPlus=f.r8p,this.showAccordion=!0,this.lookupDeleted=new o.vpe,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(n=>{n.get("id")?.value&&n.get("name")?.disable()}),this.dataSource=new c.by(this.lookupKeys.controls)}add(){this.lookupKeys.push(new s.cw({name:new s.NI("",s.kI.required),value:new s.NI(""),private:new s.NI(!1)})),this.updateDataSource()}remove(n){const l=this.lookupKeys.at(n).value;l.id&&this.lookupDeleted.emit(l),this.lookupKeys.removeAt(n),this.updateDataSource()}}).\u0275fac=function(n){return new(n||r)(o.Y36(s.sg),o.Y36(m.F))},r.\u0275cmp=o.Xpm({type:r,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},outputs:{lookupDeleted:"lookupDeleted"},standalone:!0,features:[o.jDz],decls:5,vars:6,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["color","primary","formControlName","private"],["mat-mini-fab","","type","button",1,"save-btn",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",1,"remove-btn",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(n,l){if(1&n&&(o.TgZ(0,"div",0),o.ALo(1,"async"),o.YNc(2,K,10,7,"mat-accordion",1),o.YNc(3,B,18,4,"ng-template",null,2,o.W1O),o.qZA()),2&n){const C=o.MAs(4);o.Tol(o.lcZ(1,4,l.isDarkMode)?"dark-theme":""),o.xp6(2),o.Q6J("ngIf",l.showAccordion)("ngIfElse",C)}},dependencies:[s.u5,s.Fj,s.JJ,s.JL,s.UX,s.sg,s.u,s.x0,s.CE,_.O5,_.tP,D.lN,D.KE,D.hX,E.ot,E.RK,E.nh,c.p0,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,i.c,i.Nt,t.rP,t.Rr,p.uH,p.BN,u.To,u.pp,u.ib,u.yz,u.yK,u.u4,y.Ot,_.Ov],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]}),r);k=(0,g.gn)([(0,v.c)({checkProperties:!0})],k)},42281:(A,h,a)=>{a.d(h,{E:()=>_});var g=a(56223);const _=o=>{const s=new Map,D=o;function E(i){D.at(i).get("name")?.setErrors({notUnique:!0})}return D.controls.forEach((i,t)=>{if(!(i instanceof g.cw))return;const p=i.get("name");if(!p)return;const u=p.value;u&&(s.has(u)?(E(s.get(u)??0),E(t)):(s.set(u,t),function c(i){const p=D.at(i).get("name"),u=p?.errors;u&&(delete u.notUnique,p.setErrors(Object.keys(u).length?u:null))}(t)))}),null}}}]);