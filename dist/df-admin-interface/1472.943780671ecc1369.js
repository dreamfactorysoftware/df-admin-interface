"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[1472],{41472:(D,f,n)=>{n.r(f),n.d(f,{DfForgotPasswordComponent:()=>T});var p,e=n(97582),a=n(56223),u=n(26306),d=n(58504),_=n(94664),x=n(41089),E=n(92418),h=n(62651),C=n(81896),m=n(32296),g=n(2032),i=n(64170),O=n(96814),A=n(26385),P=n(95195),Z=n(42346),v=n(78791),t=n(65879),y=n(75911),I=n(31303),U=n(99496);function F(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.email.errors.invalid")," "))}function b(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.email.errors.required")," "))}function L(r,o){if(1&r&&(t.TgZ(0,"mat-form-field",10)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"input",11),t.YNc(5,F,3,3,"mat-error",12),t.YNc(6,b,3,3,"mat-error",12),t.qZA()),2&r){const s=t.oxw(2);let l,c;t.xp6(2),t.hij(" ",t.lcZ(3,3,"userManagement.controls.email.label"),""),t.xp6(3),t.Q6J("ngIf",(null==(l=s.forgetPasswordForm.get("email"))||null==l.errors?null:l.errors.email)&&!(null!=(l=s.forgetPasswordForm.get("email"))&&null!=l.errors&&l.errors.required)),t.xp6(1),t.Q6J("ngIf",!(null!=(c=s.forgetPasswordForm.get("email"))&&null!=c.errors&&c.errors.email)&&(null==(c=s.forgetPasswordForm.get("email"))||null==c.errors?null:c.errors.required))}}function Q(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.username.errors.required")," "))}function R(r,o){if(1&r&&(t.TgZ(0,"mat-form-field",10)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"input",13),t.YNc(5,Q,3,3,"mat-error",12),t.qZA()),2&r){const s=t.oxw(2);let l;t.xp6(2),t.Oqu(t.lcZ(3,2,"userManagement.controls.username.altLabel")),t.xp6(3),t.Q6J("ngIf",null==(l=s.forgetPasswordForm.get("username"))||null==l.errors?null:l.errors.required)}}function K(r,o){if(1&r){const s=t.EpF();t.TgZ(0,"form",7),t.NdJ("ngSubmit",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.requestReset())}),t.YNc(1,L,7,5,"mat-form-field",8),t.YNc(2,R,6,4,"mat-form-field",8),t.TgZ(3,"button",9),t._uU(4),t.ALo(5,"transloco"),t.qZA()()}if(2&r){const s=t.oxw();t.Q6J("formGroup",s.forgetPasswordForm),t.xp6(1),t.Q6J("ngIf","email"===s.loginAttribute),t.xp6(1),t.Q6J("ngIf","username"===s.loginAttribute),t.xp6(2),t.hij(" ",t.lcZ(5,4,"userManagement.requestPasswordReset")," ")}}function q(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.securityAnswer.errors.required")," "))}function N(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.password.errors.required")," "))}function B(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.password.errors.length")," "))}function W(r,o){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"userManagement.controls.confirmPassword.errors.match")," "))}function J(r,o){if(1&r){const s=t.EpF();t.TgZ(0,"form",14),t.NdJ("ngSubmit",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.resetPassword())}),t.TgZ(1,"mat-form-field",10)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",15),t.qZA(),t.TgZ(6,"mat-form-field",10)(7,"mat-label"),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t._UZ(10,"input",16),t.YNc(11,q,3,3,"mat-error",12),t.qZA(),t.TgZ(12,"mat-form-field",10)(13,"mat-label"),t._uU(14),t.ALo(15,"transloco"),t.qZA(),t._UZ(16,"input",17),t.YNc(17,N,3,3,"mat-error",12),t.YNc(18,B,3,3,"mat-error",12),t.qZA(),t.TgZ(19,"mat-form-field",10)(20,"mat-label"),t._uU(21),t.ALo(22,"transloco"),t.qZA(),t._UZ(23,"input",18),t.YNc(24,W,3,3,"mat-error",12),t.qZA(),t.TgZ(25,"button",9),t._uU(26),t.ALo(27,"transloco"),t.qZA()()}if(2&r){const s=t.oxw();let l,c,M,w;t.Q6J("formGroup",s.securityQuestionForm),t.xp6(3),t.hij(" ",t.lcZ(4,11,"userManagement.controls.securityQuestion.label"),""),t.xp6(2),t.Q6J("readonly",!0),t.xp6(3),t.hij(" ",t.lcZ(9,13,"userManagement.controls.securityAnswer.label"),""),t.xp6(3),t.Q6J("ngIf",null==(l=s.securityQuestionForm.get("answer"))||null==l.errors?null:l.errors.required),t.xp6(3),t.Oqu(t.lcZ(15,15,"userManagement.controls.password.label")),t.xp6(3),t.Q6J("ngIf",null==(c=s.securityQuestionForm.get("newPassword"))||null==c.errors?null:c.errors.required),t.xp6(1),t.Q6J("ngIf",null==(M=s.securityQuestionForm.get("newPassword"))||null==M.errors?null:M.errors.minlength),t.xp6(3),t.Oqu(t.lcZ(22,17,"userManagement.controls.confirmPassword.label")),t.xp6(3),t.Q6J("ngIf",null==(w=s.securityQuestionForm.get("confirmPassword"))?null:w.hasError("doesNotMatch")),t.xp6(2),t.hij(" ",t.lcZ(27,19,"userManagement.resetPassword")," ")}}let T=((p=class{constructor(o,s,l,c,M,w){this.fb=o,this.systemConfigDataService=s,this.passwordService=l,this.translateService=c,this.router=M,this.authService=w,this.alertMsg="",this.showAlert=!1,this.alertType="error",this.loginAttribute="email",this.hasSecurityQuestion=!1,this.loginRoute=`/${h.Z.AUTH}/${h.Z.LOGIN}`,this.forgetPasswordForm=this.fb.group({username:[""],email:[""]}),this.securityQuestionForm=this.fb.group({securityQuestion:[""],securityAnswer:["",a.kI.required],newPassword:["",[a.kI.required,a.kI.minLength(6)]],confirmPassword:["",[a.kI.required,(0,E.t)("newPassword")]]})}ngOnInit(){this.systemConfigDataService.environment$.subscribe(o=>{this.loginAttribute=o.authentication.loginAttribute,"username"===this.loginAttribute?this.forgetPasswordForm.controls.username.setValidators([a.kI.required]):this.forgetPasswordForm.controls.email.setValidators([a.kI.required,a.kI.email])})}requestReset(){this.forgetPasswordForm.invalid||this.passwordService.requestPasswordReset("username"===this.loginAttribute?{username:this.forgetPasswordForm.controls.username.value}:{email:this.forgetPasswordForm.controls.email.value}).pipe((0,u.K)(o=>(this.alertMsg=o.error.error.message,this.showAlert=!0,(0,d._)(()=>new Error(o))))).subscribe(o=>{this.showAlert=!1,"securityQuestion"in o?(this.hasSecurityQuestion=!0,this.securityQuestionForm.controls.securityQuestion.setValue(o.securityQuestion)):(this.alertMsg=this.translateService.translate("userManagement.alerts.resetEmailSent"),this.showAlert=!0,this.alertType="success")})}resetPassword(){this.securityQuestionForm.invalid||this.passwordService.requestPasswordReset({...this.forgetPasswordForm.value,...this.securityQuestionForm.value},!0).pipe((0,u.K)(o=>(this.alertMsg=o.error.error.message,this.showAlert=!0,(0,d._)(()=>new Error(o)))),(0,_.w)(()=>{const o={password:this.securityQuestionForm.controls.newPassword.value};return"username"===this.loginAttribute?o.username=this.forgetPasswordForm.controls.username.value:o.email=this.forgetPasswordForm.controls.email.value,this.authService.login(o)})).subscribe(()=>{this.showAlert=!1,this.router.navigate(["/"])})}}).\u0275fac=function(o){return new(o||p)(t.Y36(a.qu),t.Y36(y.s),t.Y36(I.B),t.Y36(Z.Vn),t.Y36(C.F0),t.Y36(U.i))},p.\u0275cmp=t.Xpm({type:p,selectors:[["df-forgot-password"]],standalone:!0,features:[t.jDz],decls:16,vars:12,consts:[[1,"user-management-card-container"],[1,"user-management-card"],[3,"showAlert","alertType","alertClosed"],["name","forget-password-form",3,"formGroup","ngSubmit",4,"ngIf"],["name","security-questions-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"action-links"],["mat-button","","target","_self",3,"routerLink"],["name","forget-password-form",3,"formGroup","ngSubmit"],["appearance","fill",4,"ngIf"],["mat-flat-button","","color","primary","type","submit"],["appearance","fill"],["matInput","","type","email","formControlName","email"],[4,"ngIf"],["matInput","","type","text","formControlName","username"],["name","security-questions-form",3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","securityQuestion",3,"readonly"],["matInput","","type","text","formControlName","securityAnswer"],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","confirmPassword"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"df-alert",2),t.NdJ("alertClosed",function(){return s.showAlert=!1}),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-header")(5,"mat-card-title"),t._uU(6),t.ALo(7,"transloco"),t.qZA()(),t._UZ(8,"mat-divider"),t.TgZ(9,"mat-card-content"),t.YNc(10,K,6,6,"form",3),t.YNc(11,J,28,21,"form",4),t.TgZ(12,"div",5)(13,"a",6),t._uU(14),t.ALo(15,"transloco"),t.qZA()()()()()),2&o&&(t.xp6(2),t.Q6J("showAlert",s.showAlert)("alertType",s.alertType),t.xp6(1),t.Oqu(s.alertMsg),t.xp6(3),t.hij(" ",t.lcZ(7,8,"userManagement.passwordReset")," "),t.xp6(4),t.Q6J("ngIf",!s.hasSecurityQuestion),t.xp6(1),t.Q6J("ngIf",s.hasSecurityQuestion),t.xp6(2),t.Q6J("routerLink",s.loginRoute),t.xp6(1),t.Oqu(t.lcZ(15,10,"userManagement.login")))},dependencies:[P.QW,P.a8,P.dn,P.dk,P.n5,x.v,A.t,A.d,O.O5,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,i.lN,i.KE,i.hX,i.TO,g.c,g.Nt,m.ot,m.zs,m.lW,C.rH,Z.Ot],styles:[".user-management-card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]{padding:16px;margin:0 auto;min-width:300px;max-width:445px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .services-section[_ngcontent-%COMP%]{padding-top:32px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .services-section[_ngcontent-%COMP%]   .services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:16px;gap:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   .action-links[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),p);T=(0,e.gn)([(0,v.c)({checkProperties:!0})],T)},41089:(D,f,n)=>{n.d(f,{v:()=>C});var e=n(65879),a=n(96814),u=n(32296),d=n(45597),_=n(90590);function x(m,g){if(1&m){const i=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(i);const A=e.oxw(2);return e.KtG(A.dismissAlert())}),e.TgZ(1,"fa-icon",6),e._uU(2),e.qZA()()}if(2&m){const i=e.oxw(2);e.xp6(1),e.Q6J("icon",i.faXmark),e.xp6(1),e.Oqu("alerts.close")}}function E(m,g){if(1&m&&(e.TgZ(0,"div",1),e._UZ(1,"fa-icon",2),e.TgZ(2,"span",3),e.Hsn(3),e.qZA(),e.YNc(4,x,3,2,"button",4),e.qZA()),2&m){const i=e.oxw();e.Tol(i.alertType),e.xp6(1),e.Q6J("icon",i.icon),e.xp6(3),e.Q6J("ngIf",i.dismissible)}}const h=["*"];let C=(()=>{class m{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new e.vpe,this.faXmark=_.g82}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return _.f8k;case"error":return _.$9F;case"warning":return _.RLE;default:return _.sqG}}}return m.\u0275fac=function(i){return new(i||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[e.jDz],ngContentSelectors:h,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(i,O){1&i&&(e.F$t(),e.YNc(0,E,5,4,"div",0)),2&i&&e.Q6J("ngIf",O.showAlert)},dependencies:[a.O5,u.ot,u.RK,d.uH,d.BN],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]}),m})()},92418:(D,f,n)=>{function e(a){return u=>{const d=u.parent;if(d){const _=d.get(a);if(_&&u.value!==_.value)return{doesNotMatch:!0}}return null}}n.d(f,{t:()=>e})}}]);