"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[553],{90553:(I,c,i)=>{i.r(c),i.d(c,{DfIntercomConfigComponent:()=>u});var g=i(96814),l=i(82599),d=i(55940),s=i(56223),n=i(65879),_=i(47971),m=i(72246),f=i(14607);function C(o,a){1&o&&(n.TgZ(0,"div",5),n._UZ(1,"mat-spinner",6),n.TgZ(2,"span"),n._uU(3,"Loading configuration..."),n.qZA()())}function h(o,a){if(1&o){const e=n.EpF();n.TgZ(0,"mat-slide-toggle",7),n.NdJ("ngModelChange",function(r){n.CHM(e);const p=n.oxw();return n.KtG(p.intercomEnabled=r)})("change",function(){n.CHM(e);const r=n.oxw();return n.KtG(r.onToggleChange())}),n._uU(1),n.qZA()}if(2&o){const e=n.oxw();n.Q6J("ngModel",e.intercomEnabled)("disabled",e.saving),n.xp6(1),n.hij(" ",e.intercomEnabled?"Intercom Widget Enabled":"Intercom Widget Disabled"," ")}}function v(o,a){1&o&&(n.TgZ(0,"div",8),n._UZ(1,"mat-spinner",9),n.TgZ(2,"span"),n._uU(3,"Saving..."),n.qZA()())}let u=(()=>{class o{constructor(e,t,r){this.intercomConfigService=e,this.snackbarService=t,this.intercomService=r,this.intercomEnabled=!0,this.loading=!1,this.saving=!1}ngOnInit(){this.loadConfig()}loadConfig(){this.loading=!0,this.intercomConfigService.getConfig().subscribe({next:e=>{this.intercomEnabled=e.intercomWidget??!0,this.loading=!1},error:e=>{console.error("Failed to load Intercom configuration:",e),this.snackbarService.openSnackBar("Failed to load configuration","error"),this.loading=!1}})}saveConfig(){this.saving=!0,this.intercomConfigService.updateConfig({intercomWidget:this.intercomEnabled}).subscribe({next:()=>{this.snackbarService.openSnackBar("Intercom configuration saved successfully","success"),this.saving=!1,this.intercomEnabled?this.intercomService.showIntercom():this.intercomService.hideIntercom()},error:e=>{console.error("Failed to save Intercom configuration:",e),this.snackbarService.openSnackBar("Failed to save configuration","error"),this.saving=!1}})}onToggleChange(){this.saveConfig()}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(_.t),n.Y36(m.w),n.Y36(f.f))},o.\u0275cmp=n.Xpm({type:o,selectors:[["df-intercom-config"]],standalone:!0,features:[n.jDz],decls:7,vars:3,consts:[[1,"intercom-config-container"],[1,"config-section"],["class","loading-spinner",4,"ngIf"],["color","primary","class","toggle-control",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],["class","saving-indicator",4,"ngIf"],[1,"loading-spinner"],["diameter","30"],["color","primary",1,"toggle-control",3,"ngModel","disabled","ngModelChange","change"],[1,"saving-indicator"],["diameter","20"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"p"),n._uU(2," Control whether the Intercom chat widget is displayed to users. When disabled, no Intercom resources will be loaded and the widget will not appear. "),n.qZA(),n.TgZ(3,"div",1),n.YNc(4,C,4,0,"div",2),n.YNc(5,h,2,3,"mat-slide-toggle",3),n.YNc(6,v,4,0,"div",4),n.qZA()()),2&e&&(n.xp6(4),n.Q6J("ngIf",t.loading),n.xp6(1),n.Q6J("ngIf",!t.loading),n.xp6(1),n.Q6J("ngIf",t.saving))},dependencies:[g.ez,g.O5,l.rP,l.Rr,d.Cq,d.Ou,s.u5,s.JJ,s.On]}),o})()}}]);