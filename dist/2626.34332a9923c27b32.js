"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[2626],{92626:(b,g,r)=>{r.r(g),r.d(g,{DfPasswordResetComponent:()=>w});var t=r(31635),s=r(89417),u=r(60177),f=r(69465),_=r(25558),O=r(99437),R=r(18810),D=r(51425),E=r(88834),m=r(99631),p=r(32102),c=r(71997),d=r(25596),M=r(33609),v=r(49894),e=r(17705),A=r(79676),F=r(82298),y=r(34387),T=r(18498);function U(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"userManagement.controls.email.errors.invalid")," "))}function x(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"userManagement.controls.email.errors.required")," "))}function $(a,o){if(1&a&&(e.j41(0,"mat-form-field",5)(1,"mat-label"),e.EFF(2),e.nI1(3,"transloco"),e.k0s(),e.nrm(4,"input",11),e.DNE(5,U,3,3,"mat-error",7),e.DNE(6,x,3,3,"mat-error",7),e.k0s()),2&a){const l=e.XpG();let n,i;e.R7$(2),e.SpI(" ",e.bMT(3,3,"userManagement.controls.email.label"),""),e.R7$(3),e.Y8G("ngIf",(null==(n=l.passwordResetForm.get("email"))||null==n.errors?null:n.errors.email)&&!(null!=(n=l.passwordResetForm.get("email"))&&null!=n.errors&&n.errors.required)),e.R7$(1),e.Y8G("ngIf",!(null!=(i=l.passwordResetForm.get("email"))&&null!=i.errors&&i.errors.email)&&(null==(i=l.passwordResetForm.get("email"))||null==i.errors?null:i.errors.required))}}function j(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"userManagement.controls.username.errors.required")," "))}function B(a,o){if(1&a&&(e.j41(0,"mat-form-field",5)(1,"mat-label"),e.EFF(2),e.nI1(3,"transloco"),e.k0s(),e.nrm(4,"input",12),e.DNE(5,j,3,3,"mat-error",7),e.k0s()),2&a){const l=e.XpG();let n;e.R7$(2),e.JRh(e.bMT(3,2,"userManagement.controls.username.altLabel")),e.R7$(3),e.Y8G("ngIf",null==(n=l.passwordResetForm.get("username"))||null==n.errors?null:n.errors.required)}}function L(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"userManagement.controls.confirmationCode.errors.required")," "))}function W(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"userManagement.controls.password.errors.required")," "))}function k(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"userManagement.controls.password.errors.length")," "))}function K(a,o){1&a&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&a&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"userManagement.controls.confirmPassword.errors.match")," "))}let w=class I{constructor(o,l,n,i,P,C,h){this.fb=o,this.location=l,this.passwordResetService=n,this.systemConfigDataService=i,this.authService=P,this.router=C,this.route=h,this.user={email:"",username:"",code:"",admin:""},this.alertMsg="",this.showAlert=!1,this.alertType="error",this.loginAttribute="email",this.type="reset",this.passwordResetForm=this.fb.group({username:["",[s.k0.required]],email:["",[s.k0.required,s.k0.email]],code:["",[s.k0.required]],newPassword:["",[s.k0.required,s.k0.minLength(16)]],confirmPassword:["",[s.k0.required,(0,f.e)("newPassword")]]})}ngOnInit(){this.route.queryParams&&this.route.queryParams.subscribe(o=>{this.user={code:o.code,email:o.email,username:o.username,admin:o.admin},this.passwordResetForm.patchValue({email:this.user.email,username:this.user.username,code:this.user.code})}),this.systemConfigDataService.environment$.subscribe(o=>{this.loginAttribute=o.authentication.loginAttribute}),this.route.data.subscribe(o=>{"type"in o&&(this.type=o.type)})}get isAdmin(){return"1"===this.user.admin}resetPassword(){if(this.passwordResetForm.invalid)return;const{confirmPassword:o,...l}=this.passwordResetForm.value;this.passwordResetService.resetPassword(l,this.isAdmin).pipe((0,_.n)(()=>{const n={password:l.newPassword};return"email"===this.loginAttribute?n.email=l.email:n.username=l.username,this.authService.login(n)}),(0,O.W)(n=>(this.alertMsg=n.error.error.message,this.showAlert=!0,(0,R.$)(()=>new Error(n))))).subscribe(()=>{this.showAlert=!1,this.router.navigate(["/"])})}static{this.\u0275fac=function(l){return new(l||I)(e.rXU(s.ok),e.rXU(u.aZ),e.rXU(A.p),e.rXU(F.f),e.rXU(y.g),e.rXU(T.Ix),e.rXU(T.nX))}}static{this.\u0275cmp=e.VBU({type:I,selectors:[["df-password-reset"]],standalone:!0,features:[e.aNF],decls:35,vars:25,consts:[[1,"user-management-card-container"],[1,"user-management-card"],[3,"showAlert","alertType","alertClosed"],["name","reset-password-form",3,"formGroup","ngSubmit"],["appearance","outline",4,"ngIf"],["appearance","outline"],["matInput","","type","text","formControlName","code"],[4,"ngIf"],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","confirmPassword"],["mat-flat-button","","color","primary","type","submit"],["matInput","","type","email","formControlName","email"],["matInput","","type","text","formControlName","username"]],template:function(l,n){if(1&l&&(e.j41(0,"div",0)(1,"mat-card",1)(2,"df-alert",2),e.bIt("alertClosed",function(){return n.showAlert=!1}),e.EFF(3),e.k0s(),e.j41(4,"mat-card-header")(5,"mat-card-title"),e.EFF(6),e.nI1(7,"transloco"),e.k0s()(),e.nrm(8,"mat-divider"),e.j41(9,"mat-card-content")(10,"form",3),e.bIt("ngSubmit",function(){return n.resetPassword()}),e.DNE(11,$,7,5,"mat-form-field",4),e.DNE(12,B,6,4,"mat-form-field",4),e.j41(13,"mat-form-field",5)(14,"mat-label"),e.EFF(15),e.nI1(16,"transloco"),e.k0s(),e.nrm(17,"input",6),e.DNE(18,L,3,3,"mat-error",7),e.k0s(),e.j41(19,"mat-form-field",5)(20,"mat-label"),e.EFF(21),e.nI1(22,"transloco"),e.k0s(),e.nrm(23,"input",8),e.DNE(24,W,3,3,"mat-error",7),e.DNE(25,k,3,3,"mat-error",7),e.k0s(),e.j41(26,"mat-form-field",5)(27,"mat-label"),e.EFF(28),e.nI1(29,"transloco"),e.k0s(),e.nrm(30,"input",9),e.DNE(31,K,3,3,"mat-error",7),e.k0s(),e.j41(32,"button",10),e.EFF(33),e.nI1(34,"transloco"),e.k0s()()()()()),2&l){let i,P,C,h;e.R7$(2),e.Y8G("showAlert",n.showAlert)("alertType",n.alertType),e.R7$(1),e.JRh(n.alertMsg),e.R7$(3),e.SpI(" ",e.bMT(7,15,"userManagement."+("reset"===n.type?"resetPassword":"register"===n.type?"registrationConfirmation":"invitatonConfirmation"))," "),e.R7$(4),e.Y8G("formGroup",n.passwordResetForm),e.R7$(1),e.Y8G("ngIf","email"===n.loginAttribute),e.R7$(1),e.Y8G("ngIf","username"===n.loginAttribute),e.R7$(3),e.SpI(" ",e.bMT(16,17,"userManagement.controls.confirmationCode.label"),""),e.R7$(3),e.Y8G("ngIf",null==(i=n.passwordResetForm.get("code"))||null==i.errors?null:i.errors.required),e.R7$(3),e.JRh(e.bMT(22,19,"userManagement.controls.password."+("reset"===n.type?"label":"altLabel"))),e.R7$(3),e.Y8G("ngIf",null==(P=n.passwordResetForm.get("newPassword"))||null==P.errors?null:P.errors.required),e.R7$(1),e.Y8G("ngIf",null==(C=n.passwordResetForm.get("newPassword"))||null==C.errors?null:C.errors.minlength),e.R7$(3),e.JRh(e.bMT(29,21,"userManagement.controls.confirmPassword."+("reset"===n.type?"label":"altLabel"))),e.R7$(3),e.Y8G("ngIf",null==(h=n.passwordResetForm.get("confirmPassword"))?null:h.hasError("doesNotMatch")),e.R7$(2),e.SpI(" ",e.bMT(34,23,"reset"===n.type?"userManagement.resetPassword":"userManagement.confirmUser")," ")}},dependencies:[d.Hu,d.RN,d.m2,d.MM,d.dh,D.W,c.w,c.q,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,u.bT,p.RG,p.rl,p.nJ,p.TL,m.fS,m.fg,E.Hl,E.$z,M.Kj],styles:[".user-management-card-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:100%}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]{padding:16px;margin:0 auto;min-width:300px;max-width:445px;box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape: 4px;--mdc-outlined-card-container-shape: 4px;--mdc-outlined-card-outline-width: 1px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .services-section[_ngcontent-%COMP%]{padding-top:32px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .services-section[_ngcontent-%COMP%]   .services-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-top:16px;gap:16px}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.user-management-card-container[_ngcontent-%COMP%]   .user-management-card[_ngcontent-%COMP%]   .action-links[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.user-management-card-container[_ngcontent-%COMP%]{margin-top:20vh}.user-management-card-container.dark-theme[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff}"]})}};w=(0,t.Cg)([(0,v.d)({checkProperties:!0})],w)},51425:(b,g,r)=>{r.d(g,{W:()=>E});var t=r(17705),s=r(60177),u=r(88834),f=r(20060),_=r(45383);function O(m,p){if(1&m){const c=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(c);const M=t.XpG(2);return t.Njj(M.dismissAlert())}),t.j41(1,"fa-icon",6),t.EFF(2),t.k0s()()}if(2&m){const c=t.XpG(2);t.R7$(1),t.Y8G("icon",c.faXmark),t.R7$(1),t.JRh("alerts.close")}}function R(m,p){if(1&m&&(t.j41(0,"div",1),t.nrm(1,"fa-icon",2),t.j41(2,"span",3),t.SdG(3),t.k0s(),t.DNE(4,O,3,2,"button",4),t.k0s()),2&m){const c=t.XpG();t.HbH(c.alertType),t.R7$(1),t.Y8G("icon",c.icon),t.R7$(3),t.Y8G("ngIf",c.dismissible)}}const D=["*"];let E=(()=>{class m{constructor(){this.alertType="success",this.showAlert=!1,this.dismissible=!0,this.alertClosed=new t.bkB,this.faXmark=_.Jyw}dismissAlert(){this.alertClosed.emit()}get icon(){switch(this.alertType){case"success":return _.SGM;case"error":return _.rfe;case"warning":return _.tUE;default:return _.iW_}}static{this.\u0275fac=function(d){return new(d||m)}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["df-alert"]],inputs:{alertType:"alertType",showAlert:"showAlert",dismissible:"dismissible"},outputs:{alertClosed:"alertClosed"},standalone:!0,features:[t.aNF],ngContentSelectors:D,decls:1,vars:1,consts:[["class","alert-container",3,"class",4,"ngIf"],[1,"alert-container"],["aria-hidden","true",1,"alert-icon",3,"icon"],["role","alert",1,"alert-message"],["mat-icon-button","","class","dismiss-alert",3,"click",4,"ngIf"],["mat-icon-button","",1,"dismiss-alert",3,"click"],[3,"icon"]],template:function(d,M){1&d&&(t.NAR(),t.DNE(0,R,5,4,"div",0)),2&d&&t.Y8G("ngIf",M.showAlert)},dependencies:[s.bT,u.Hl,u.iY,f.dX,f.aY],styles:[".alert-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border:1px solid;border-radius:5px;box-shadow:0 0 5px #0003;color:#000}.alert-container[_ngcontent-%COMP%]   .alert-message[_ngcontent-%COMP%]{flex:1;padding:8px}.alert-container[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{padding:0 10px}.alert-container.success[_ngcontent-%COMP%]{border-color:#81c784;background-color:#c8e6c9}.alert-container.success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#4caf50}.alert-container.error[_ngcontent-%COMP%]{border-color:#e57373;background-color:#ffcdd2}.alert-container.error[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#f44336}.alert-container.warning[_ngcontent-%COMP%]{border-color:#ffb74d;background-color:#ffe0b2}.alert-container.warning[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#ff9800}.alert-container.info[_ngcontent-%COMP%]{border-color:#64b5f6;background-color:#bbdefb}.alert-container.info[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#2196f3}"]})}}return m})()},69465:(b,g,r)=>{function t(s){return u=>{const f=u.parent;if(f){const _=f.get(s);if(_&&u.value!==_.value)return{doesNotMatch:!0}}return null}}r.d(g,{e:()=>t})}}]);