"use strict";(self.webpackChunkdf_admin_interface=self.webpackChunkdf_admin_interface||[]).push([[8019],{68019:(R,k,a)=>{a.r(k),a.d(k,{DfGlobalLookupKeysComponent:()=>D});var K=a(31635),r=a(89417),e=a(58751),l=a(80345),d=a(33609),E=a(88834),_=a(24784),u=a(49894),t=a(17705),p=a(18498);a(36225);let D=class g{constructor(i,c,h){this.crudService=i,this.fb=c,this.activatedRoute=h,this.lookupKeysForm=this.fb.group({lookupKeys:this.fb.array([],[l.D])})}ngOnInit(){this.activatedRoute.data.subscribe(({data:i})=>{i.resource.length>0&&i.resource.forEach(c=>{this.lookupKeysForm.controls.lookupKeys.push(new r.gE({name:new r.MJ(c.name,[r.k0.required]),value:new r.MJ(c.value),private:new r.MJ(c.private),id:new r.MJ(c.id)}))})})}save(){if(this.lookupKeysForm.invalid||this.lookupKeysForm.pristine)return;const i=[],c=[];this.lookupKeysForm.get("lookupKeys").controls.forEach(f=>{f.pristine||(f.value.id?c.push(f.value):i.push({...f.value,id:null}))}),i.length>0&&this.crudService.create({resource:i},{fields:"*",snackbarSuccess:"lookupKeys.alerts.createSuccess"}).subscribe(),c.length>0&&c.forEach(f=>{f.id&&this.crudService.update(f.id,f,{snackbarSuccess:"lookupKeys.alerts.updateSuccess"}).subscribe()})}static{this.\u0275fac=function(c){return new(c||g)(t.rXU(_.mr),t.rXU(r.ok),t.rXU(p.nX))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["df-global-lookup-keys"]],standalone:!0,features:[t.aNF],decls:8,vars:8,consts:[[3,"formGroup","ngSubmit"],["formArrayName","lookupKeys",3,"showAccordion"],["mat-flat-button","","type","submit",1,"save-btn"]],template:function(c,h){1&c&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"transloco"),t.k0s(),t.j41(3,"form",0),t.bIt("ngSubmit",function(){return h.save()}),t.nrm(4,"df-lookup-keys",1),t.j41(5,"button",2),t.EFF(6),t.nI1(7,"transloco"),t.k0s()()),2&c&&(t.R7$(1),t.JRh(t.bMT(2,4,"lookupKeys.fullDesc")),t.R7$(2),t.Y8G("formGroup",h.lookupKeysForm),t.R7$(1),t.Y8G("showAccordion",!1),t.R7$(2),t.SpI(" ",t.bMT(7,6,"save")," "))},dependencies:[e.S,r.X1,r.qT,r.cb,r.j4,r.v8,d.Kj,E.Hl,E.$z]})}};D=(0,K.Cg)([(0,u.d)({checkProperties:!0})],D)},58751:(R,k,a)=>{a.d(k,{S:()=>C});var K=a(31635),r=a(60177),e=a(17705),l=a(89417),d=a(32102),E=a(88834),_=a(9159),u=a(99631),t=a(30450),p=a(20060),m=a(9454),D=a(45383),T=a(33609),i=a(49894),c=a(52868);function h(o,s){if(1&o&&(e.j41(0,"mat-accordion")(1,"mat-expansion-panel")(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e.EFF(4),e.nI1(5,"transloco"),e.k0s(),e.j41(6,"mat-panel-description"),e.EFF(7),e.nI1(8,"transloco"),e.k0s()(),e.eu8(9,3),e.k0s()()),2&o){e.XpG();const n=e.sdS(4);e.R7$(4),e.SpI(" ",e.bMT(5,3,"lookupKeys.label"),""),e.R7$(3),e.JRh(e.bMT(8,5,"lookupKeys.desc")),e.R7$(2),e.Y8G("ngTemplateOutlet",n)}}function f(o,s){1&o&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"name")," "))}function O(o,s){1&o&&(e.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",18),e.k0s()()),2&o&&(e.Y8G("formGroupName",s.index),e.R7$(3),e.JRh(e.bMT(4,2,"name")))}function P(o,s){1&o&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"value")," "))}function I(o,s){1&o&&(e.j41(0,"mat-cell",16)(1,"mat-form-field",17)(2,"mat-label"),e.EFF(3),e.nI1(4,"transloco"),e.k0s(),e.nrm(5,"input",19),e.k0s()()),2&o&&(e.Y8G("formGroupName",s.index),e.R7$(3),e.JRh(e.bMT(4,2,"value")))}function b(o,s){1&o&&(e.j41(0,"mat-header-cell"),e.EFF(1),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"private")," "))}function L(o,s){1&o&&(e.j41(0,"mat-cell",16),e.nrm(1,"mat-slide-toggle",20),e.nI1(2,"transloco"),e.k0s()),2&o&&(e.Y8G("formGroupName",s.index),e.R7$(1),e.BMQ("aria-label",e.bMT(2,2,"name")))}function G(o,s){if(1&o){const n=e.RV6();e.j41(0,"mat-header-cell")(1,"button",21),e.bIt("click",function(){e.eBV(n);const M=e.XpG(2);return e.Njj(M.add())}),e.nI1(2,"transloco"),e.nrm(3,"fa-icon",22),e.k0s()()}if(2&o){const n=e.XpG(2);e.R7$(1),e.BMQ("aria-label",e.bMT(2,2,"newEntry")),e.R7$(2),e.Y8G("icon",n.faPlus)}}function A(o,s){if(1&o){const n=e.RV6();e.j41(0,"mat-cell",16)(1,"button",23),e.bIt("click",function(){const N=e.eBV(n).index,j=e.XpG(2);return e.Njj(j.remove(N))}),e.nrm(2,"fa-icon",24),e.k0s()()}if(2&o){const n=s.index,y=e.XpG(2);e.Y8G("formGroupName",n),e.R7$(2),e.Y8G("icon",y.faTrashCan)}}function B(o,s){1&o&&e.nrm(0,"mat-header-row")}function F(o,s){1&o&&e.nrm(0,"mat-row")}function U(o,s){1&o&&(e.j41(0,"tr",25)(1,"td",26),e.EFF(2),e.nI1(3,"transloco"),e.k0s()()),2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lookupKeys.noKeys")," "))}function S(o,s){if(1&o&&(e.qex(0,4)(1,5),e.j41(2,"mat-table",6),e.qex(3,7),e.DNE(4,f,3,3,"mat-header-cell",8),e.DNE(5,O,6,4,"mat-cell",9),e.bVm(),e.qex(6,10),e.DNE(7,P,3,3,"mat-header-cell",8),e.DNE(8,I,6,4,"mat-cell",9),e.bVm(),e.qex(9,11),e.DNE(10,b,3,3,"mat-header-cell",8),e.DNE(11,L,3,4,"mat-cell",9),e.bVm(),e.qex(12,12),e.DNE(13,G,4,4,"mat-header-cell",8),e.DNE(14,A,3,2,"mat-cell",9),e.bVm(),e.DNE(15,B,1,0,"mat-header-row",13),e.DNE(16,F,1,0,"mat-row",14),e.DNE(17,U,4,3,"tr",15),e.k0s(),e.bVm()()),2&o){const n=e.XpG();e.Y8G("formGroup",n.rootForm),e.R7$(2),e.Y8G("dataSource",n.dataSource),e.R7$(13),e.Y8G("matHeaderRowDef",n.displayedColumns),e.R7$(1),e.Y8G("matRowDefColumns",n.displayedColumns)}}let C=class v{constructor(s,n){this.rootFormGroup=s,this.themeService=n,this.displayedColumns=["name","value","private","actions"],this.faTrashCan=D.sjs,this.faPlus=D.QLR,this.showAccordion=!0,this.lookupDeleted=new e.bkB,this.isDarkMode=this.themeService.darkMode$}ngOnInit(){this.rootForm=this.rootFormGroup.control,this.rootFormGroup.ngSubmit.subscribe(()=>{this.lookupKeys.markAllAsTouched()}),this.lookupKeys=this.rootForm.get("lookupKeys"),this.updateDataSource()}updateDataSource(){this.lookupKeys.controls.forEach(s=>{s.get("id")?.value&&s.get("name")?.disable()}),this.dataSource=new _.I6(this.lookupKeys.controls)}add(){this.lookupKeys.push(new l.gE({name:new l.MJ("",l.k0.required),value:new l.MJ(""),private:new l.MJ(!1)})),this.updateDataSource()}remove(s){const n=this.lookupKeys.at(s).value;n.id&&this.lookupDeleted.emit(n),this.lookupKeys.removeAt(s),this.updateDataSource()}static{this.\u0275fac=function(n){return new(n||v)(e.rXU(l.j4),e.rXU(c.n))}}static{this.\u0275cmp=e.VBU({type:v,selectors:[["df-lookup-keys"]],inputs:{showAccordion:"showAccordion"},outputs:{lookupDeleted:"lookupDeleted"},standalone:!0,features:[e.aNF],decls:5,vars:6,consts:[[1,"lookup-keys-accordion"],[4,"ngIf","ngIfElse"],["lookupKeys",""],[3,"ngTemplateOutlet"],[3,"formGroup"],["formArrayName","lookupKeys"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[3,"formGroupName",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","private"],["matColumnDef","actions","stickyEnd",""],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],[3,"formGroupName"],["appearance","outline","subscriptSizing","dynamic"],["matInput","","formControlName","name"],["matInput","","formControlName","value"],["color","primary","formControlName","private"],["mat-mini-fab","","type","button",1,"save-btn",3,"click"],["size","xl",3,"icon"],["mat-icon-button","","type","button",1,"remove-btn",3,"click"],["size","xs",3,"icon"],[1,"mat-row","no-data-row"],["colspan","4",1,"mat-cell"]],template:function(n,y){if(1&n&&(e.j41(0,"div",0),e.nI1(1,"async"),e.DNE(2,h,10,7,"mat-accordion",1),e.DNE(3,S,18,4,"ng-template",null,2,e.C5r),e.k0s()),2&n){const M=e.sdS(4);e.HbH(e.bMT(1,4,y.isDarkMode)?"dark-theme":""),e.R7$(2),e.Y8G("ngIf",y.showAccordion)("ngIfElse",M)}},dependencies:[l.YN,l.me,l.BC,l.cb,l.X1,l.j4,l.JD,l.$R,l.v8,r.bT,r.T3,d.RG,d.rl,d.nJ,E.Hl,E.iY,E.$0,_.tP,_.Zl,_.tL,_.ji,_.cC,_.YV,_.iL,_.KS,_.$R,_.YZ,_.NB,_.ky,u.fS,u.fg,t.mV,t.sG,p.dX,p.aY,m.MY,m.BS,m.GK,m.Z2,m.WN,m.Q6,T.Kj,r.Jj],styles:[".lookup-keys-accordion[_ngcontent-%COMP%]{padding:16px 0}.mat-column-actions[_ngcontent-%COMP%], .mat-column-private[_ngcontent-%COMP%]{max-width:10%}.mat-mdc-cell[_ngcontent-%COMP%]{padding:8px}"]})}};C=(0,K.Cg)([(0,i.d)({checkProperties:!0})],C)},80345:(R,k,a)=>{a.d(k,{D:()=>r});var K=a(89417);const r=e=>{const l=new Map,d=e;function E(u){d.at(u).get("name")?.setErrors({notUnique:!0})}return d.controls.forEach((u,t)=>{if(!(u instanceof K.gE))return;const p=u.get("name");if(!p)return;const m=p.value;m&&(l.has(m)?(E(l.get(m)??0),E(t)):(l.set(m,t),function _(u){const p=d.at(u).get("name"),m=p?.errors;m&&(delete m.notUnique,p.setErrors(Object.keys(m).length?m:null))}(t)))}),null}}}]);