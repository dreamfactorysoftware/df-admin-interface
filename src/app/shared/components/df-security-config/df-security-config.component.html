<div class="security-config-wrapper">
  <h3>Security Configuration</h3>

  <div class="security-cards-container">
    <mat-card
      class="security-option-card"
      [class.selected]="option.selected"
      [class.read-level]="option.selected && option.level === 'read'"
      [class.write-level]="option.selected && option.level === 'write'"
      [class.full-level]="option.selected && option.level === 'full'"
      *ngFor="let option of accessOptions"
      (click)="toggleCard(option)">
      <div class="card-header">
        <div class="card-title">{{ option.label }}</div>
        <div class="card-description">{{ option.description }}</div>
      </div>

      <div class="toggle-container" *ngIf="option.key !== 'fullAccess'">
        <mat-button-toggle-group
          [value]="option.selected ? option.level : null"
          [disabled]="!option.selected"
          (click)="$event.stopPropagation()"
          (change)="onAccessLevelChange(option, $event.value)"
          class="access-toggle-group"
          appearance="legacy">
          <mat-button-toggle value="read" class="read-toggle">
            <span class="toggle-icon"><fa-icon [icon]="faEye"></fa-icon></span>
            Read Only
          </mat-button-toggle>

          <mat-button-toggle value="write" class="write-toggle">
            <span class="toggle-icon"><fa-icon [icon]="faPen"></fa-icon></span>
            Read & Write
          </mat-button-toggle>

          <mat-button-toggle value="full" class="full-toggle">
            <span class="toggle-icon"
              ><fa-icon [icon]="faLockOpen"></fa-icon
            ></span>
            Full Access
          </mat-button-toggle>
        </mat-button-toggle-group>
      </div>
    </mat-card>
  </div>

  <div class="action-buttons">
    <button mat-stroked-button (click)="handleGoBack()">Back</button>
    <button
      mat-flat-button
      color="primary"
      type="button"
      (click)="saveSecurityConfig()"
      [disabled]="!isSecurityConfigValid()">
      Apply Security Configuration
    </button>
  </div>
</div>
